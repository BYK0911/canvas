{"version":3,"sources":["webpack:///./src/views/home/components/tools/size/drawer/index.vue?a556","webpack:///./src/views/home/components/tools/export/drawer/index.vue?5ebd","webpack:///./src/views/home/index.vue?3d3c","webpack:///./src/views/home/components/menus/index.vue?822d","webpack:///./src/modules/canvas/event/index.ts","webpack:///./src/modules/coord/index.ts","webpack:///./src/modules/canvas/index.ts","webpack:///./src/views/home/components/tools/pen/index.vue","webpack:///./src/views/home/components/tools/pen/index.vue?4749","webpack:///./src/views/home/components/tools/size/drawer/index.vue","webpack:///./src/views/home/components/tools/size/drawer/index.vue?873f","webpack:///./src/views/home/components/tools/size/index.vue","webpack:///./src/views/home/components/tools/size/index.vue?4e0a","webpack:///./src/views/home/components/tools/color/drawer/color.vue","webpack:///./src/views/home/components/tools/color/drawer/color.vue?b200","webpack:///./src/views/home/components/tools/color/drawer/index.vue","webpack:///./src/views/home/components/tools/color/drawer/index.vue?058e","webpack:///./src/views/home/components/tools/color/index.vue","webpack:///./src/views/home/components/tools/color/index.vue?aa0b","webpack:///./src/views/home/components/tools/undo/index.vue","webpack:///./src/views/home/components/tools/undo/index.vue?0058","webpack:///./src/views/home/components/tools/redo/index.vue","webpack:///./src/views/home/components/tools/redo/index.vue?e2b9","webpack:///./src/views/home/components/tools/clear/index.vue","webpack:///./src/views/home/components/tools/clear/index.vue?35be","webpack:///./src/views/home/components/tools/export/drawer/index.vue","webpack:///./src/views/home/components/tools/export/drawer/index.vue?d6fb","webpack:///./src/views/home/components/tools/export/index.vue","webpack:///./src/views/home/components/tools/export/index.vue?573d","webpack:///./src/views/home/components/tools/background/drawer/index.vue","webpack:///./src/views/home/components/tools/background/drawer/index.vue?cbdc","webpack:///./src/views/home/components/tools/background/index.vue","webpack:///./src/views/home/components/tools/background/index.vue?df09","webpack:///./src/views/home/components/tools/resetViewport/index.vue","webpack:///./src/views/home/components/tools/resetViewport/index.vue?1903","webpack:///./src/views/home/components/tools/more/index.vue","webpack:///./src/views/home/components/tools/more/index.vue?7b4d","webpack:///./src/views/home/components/menus/index.vue","webpack:///./src/views/home/components/menus/index.vue?02c1","webpack:///./src/views/home/log.ts","webpack:///./src/views/home/setting.ts","webpack:///./src/views/home/event/panzoom.ts","webpack:///./src/modules/canvas/layer/index.ts","webpack:///./src/modules/canvas/painter/pen.ts","webpack:///./src/modules/canvas/painter/pencil.ts","webpack:///./src/modules/canvas/painter/markPen.ts","webpack:///./src/modules/canvas/painter/eraser.ts","webpack:///./src/modules/canvas/painter/softPen.ts","webpack:///./src/modules/canvas/painter/index.ts","webpack:///./src/modules/canvas/layer/path.ts","webpack:///./src/views/home/event/draw.ts","webpack:///./src/modules/canvas/utils/magicWand.ts","webpack:///./src/modules/canvas/layer/Rasterized.ts","webpack:///./src/views/home/event/buket.ts","webpack:///./src/views/home/event/index.ts","webpack:///./src/views/home/index.vue","webpack:///./src/views/home/index.vue?2e04","webpack:///./src/views/home/components/menus/index.vue?aba6","webpack:///./src/views/home/components/tools/size/index.vue?7d40","webpack:///./src/views/home/components/tools/color/drawer/color.vue?e08c","webpack:///./src/views/home/index.vue?3632","webpack:///./src/views/home/components/tools/pen/index.vue?37a4"],"names":["touchstart","cvs","e","preventDefault","emit","touchmove","touchend","initEvent","dom","addEventListener","bind","disposeEvent","removeEventListener","Coord","constructor","x","y","this","matrix","a","b","c","d","f","translate","dx","dy","move","rotate","Math","cos","s","sin","scale","kx","ky","skewX","angle","PI","tan","skewY","norm","sqrt","normalVector","n","unit","n2","dot","max","min","acos","cross","flip","x0","y0","x1","y1","m","p","q","Canvas","rotation","mode","backgroundColor","width","height","layers","handlers","initDom","ctx","getContext","document","createElement","Object","assign","style","background","verticalAlign","mount","appendChild","w","offsetWidth","h","offsetHeight","console","log","resize","drawFrame","clearRect","fillStyle","fillRect","save","forEach","layer","draw","restore","getRelativeCoord","on","eventType","eventHandler","push","off","i","indexOf","splice","length","cb","destroy","_hoisted_1","key","class","_hoisted_2","_defineComponent","__name","setup","__props","setting","inject","pens","name","icon","setPainter","painter","_ctx","_cache","_openBlock","_createElementBlock","_Fragment","_renderList","_normalizeClass","_unref","onClick","$event","__exports__","_withScopeId","_pushScopeId","_popScopeId","_createElementVNode","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","sizes","_component_el_slider","_resolveComponent","painterSize","_normalizeStyle","_createVNode","modelValue","openDrawer","Drawer","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","props","emits","colorValue","ref","color","colorUsed","closeDrawer","colors","hex","toString","r","g","watch","v","value","includes","pop","unshift","_component_el_color_picker","_createBlock","Color","undo","index","his","slice","redo","_createTextVNode","clear","src","toDataURL","backgroundColorUsed","resetViewport","_component_el_dropdown_item","_component_el_dropdown_menu","_component_el_dropdown","placement","dropdown","_withCtx","default","Background","_","ResetViewport","Export","divided","Clear","Pen","Size","Undo","Redo","MoreOptions","logs","reactive","ev","touches","pageX","pageY","_x0","_y0","_x1","_y1","_v","ang","k","c0","c1","Layer","path","painterOption","beginPath","arc","size","closePath","fill","moveTo","lineTo","strokeStyle","lineWidth","lineCap","lineJoin","stroke","globalCompositeOperation","lw0","lw1","dw","type","drawMarkPen","drawPencil","drawEraser","drawSoftPen","drawPen","Path","super","data","moved","offsetY","magicWand","imageData","px","py","threshold","distance","p1","p2","sum","abs","checked","Set","res","p0","check","has","add","img","drawImage","flag","floor","getImageData","_x","_y","undefined","_cvs","round","Rasterized","panzoom","buket","cvsWrap","logRef","expandLog","animateId","render","window","requestAnimationFrame","provide","drawer","markRaw","onMounted","onBeforeMount","cancelAnimationFrame","nextTick","scrollTop","Menus","onGesturestart","_withModifiers","ref_key","_Transition","_resolveDynamicComponent","_createCommentVNode"],"mappings":"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","file":"js/home.a79ade2b.js","sourcesContent":["export * from \"-!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=858982ae&scoped=true&lang=scss\"","export * from \"-!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=1de6035a&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=1&id=5c575d3a&lang=css\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=1&id=1a18273b&lang=css\"","import Canvas from \"../\"\n\nconst touchstart = (cvs: Canvas, e: TouchEvent): void => {\n  e.preventDefault()\n  cvs.emit('touchstart', e)\n}\nconst touchmove = (cvs: Canvas, e: TouchEvent): void => {\n  e.preventDefault()\n  cvs.emit('touchmove', e)\n}\nconst touchend = (cvs: Canvas, e: TouchEvent): void => {\n  e.preventDefault()\n  cvs.emit('touchend', e)\n}\n\nexport function initEvent (cvs: Canvas): void {\n  cvs.dom.addEventListener('touchstart', touchstart.bind(cvs.dom, cvs))\n  cvs.dom.addEventListener('touchmove', touchmove.bind(cvs.dom, cvs))\n  cvs.dom.addEventListener('touchend', touchend.bind(cvs.dom, cvs))\n}\n\nexport function disposeEvent (cvs: Canvas): void {\n  cvs.dom.removeEventListener('touchstart', touchstart.bind(cvs.dom, cvs))\n  cvs.dom.removeEventListener('touchmove', touchmove.bind(cvs.dom, cvs))\n  cvs.dom.removeEventListener('touchend', touchend.bind(cvs.dom, cvs))\n}","export default class Coord {\n  x: number;\n  y: number;\n\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n\n  matrix(\n    a: number,\n    b: number,\n    c: number,\n    d: number,\n    e: number,\n    f: number\n  ): Coord {\n    const x = this.x;\n    const y = this.y;\n    this.x = a * x + b * y + c;\n    this.y = d * x + e * y + f;\n\n    return this;\n  }\n\n  translate(dx: number, dy: number): Coord {\n    this.x += dx;\n    this.y += dy;\n\n    return this;\n  }\n\n  move(dx: number, dy: number): Coord {\n    return this.translate(dx, dy);\n  }\n\n  rotate(a: number): Coord {\n    const c = Math.cos(a);\n    const s = Math.sin(a);\n\n    this.matrix(c, -s, 0, s, c, 0);\n\n    return this;\n  }\n\n  scale(kx: number, ky: number): Coord {\n    this.x *= kx;\n    this.y *= ky;\n    return this;\n  }\n\n  skewX(angle: number): Coord {\n    angle = (angle / 180) * Math.PI;\n    const tan = Math.tan(angle);\n    return this.matrix(1, tan, 0, 0, 1, 0);\n  }\n\n  skewY(angle: number): Coord {\n    angle = (angle / 180) * Math.PI;\n    const tan = Math.tan(angle);\n    return this.matrix(1, 0, 0, tan, 1, 0);\n  }\n\n  norm(): number {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  }\n\n  normalVector(): Coord {\n    const n = this.norm();\n    return n === 0 ? this : new Coord(this.y / n, -this.x / n);\n  }\n\n  unit(): Coord {\n    const n = this.norm();\n    return n === 0 ? this : new Coord(this.x / n, this.y / n);\n  }\n\n  angle (x = 1, y = 0): number {\n    const n = this.norm()\n    const n2 = Math.sqrt(x * x + y * y);\n    if (n * n2 === 0) return 0\n    const d = this.dot(x, y);\n    const cos = Math.max(-1, Math.min(1, d / n / n2))\n    \n    return Math.acos(cos);\n  }\n\n  // 向量内积\n  dot(x: number, y: number): number {\n\n    return this.x * x + this.y * y;\n  }\n\n  // 向量外积\n  cross(x: number, y: number): number {\n    return this.x * y - this.y * x;\n  }\n\n  flip(x0: number, y0: number, x1: number, y1: number): Coord {\n    const { x, y } = this;\n    const [m, n] = [x - x0, y - y0];\n    const [p, q] = [x1 - x0, y1 - y0];\n    if (p !== 0 || q !== 0){\n      const d = p * p + q * q;\n      this.x = (m * (p * p - q * q) + 2 * n * p * q) / d + x0;\n      this.y = (n * (q * q - p * p) + 2 * m * p * q) / d + y0;\n    }\n    return this;\n  }\n}\n","import Layer from \"./layer\"\nimport { initEvent, disposeEvent } from './event'\nimport Coord from \"../coord\";\n\ninterface CB {\n  (e: Event): void\n}\n\nexport default class Canvas {\n  x = 0;\n  y = 0;\n  scale = 1;\n  rotation = 0;\n  mode = 'default'\n  backgroundColor = 'rgba(255, 255, 255, 0)'\n  width = 400\n  height = 300\n  layers: Layer[] = []\n  dom: HTMLCanvasElement\n  ctx: CanvasRenderingContext2D\n\n  private handlers: Record<string, CB[]> = {}\n\n  constructor () {\n    this.dom = this.initDom()\n    this.ctx = this.dom.getContext('2d') as CanvasRenderingContext2D\n    initEvent(this)\n  }\n\n  initDom (): HTMLCanvasElement {\n    const cvs = document.createElement('canvas')\n  \n    cvs.width = this.width\n    cvs.height = this.height\n    Object.assign(cvs.style, {\n      width: this.width + 'px',\n      height: this.height + 'px',\n      background: '#f0f0f0',\n      verticalAlign: 'middle',\n    })\n\n    return cvs\n  }\n\n  mount (dom: HTMLElement): void {\n    dom.appendChild(this.dom)\n    const w = dom.offsetWidth\n    const h = dom.offsetHeight\n    console.log(w, h)\n\n    this.resize(w, h)\n  }\n\n  resize (w: number, h: number): void {\n    this.width = w\n    this.height = h\n    this.dom.width = w\n    this.dom.height = h\n    this.dom.style.width = w + 'px'\n    this.dom.style.height = h + 'px'\n  }\n\n  drawFrame (): void {\n    const {\n      x,\n      y,\n      scale,\n      width,\n      height,\n      layers,\n      ctx,\n      backgroundColor,\n      rotation,\n    } = this\n\n    ctx.clearRect(0, 0, width, height)\n    ctx.fillStyle = backgroundColor\n    ctx.fillRect(0, 0, width, height)\n    ctx.save()\n    ctx.translate(x, y)\n    ctx.scale(scale, scale)\n    ctx.rotate(rotation)\n    layers.forEach(layer => {\n      ctx.save()\n      layer.draw(ctx)\n      ctx.restore()\n    })\n    ctx.restore()\n  }\n\n  getRelativeCoord (x: number, y: number): Coord {\n    return new Coord(x, y)\n      .translate(-this.x, -this.y)\n      .scale(1 / this.scale, 1 / this.scale)\n      .rotate(-this.rotation)\n  }\n\n  on (eventType: string, eventHandler: CB): void {\n    if (!this.handlers[eventType]) {\n      this.handlers[eventType] = []\n    }\n    const handlers = this.handlers[eventType]\n    handlers.push(eventHandler)\n  }\n\n  off (eventType: string, eventHandler?: CB): void {\n    if (!this.handlers[eventType]) return\n    if (!eventHandler) {\n      this.handlers[eventType] = []\n      return\n    }\n\n    const handlers = this.handlers[eventType]\n    const i = handlers.indexOf(eventHandler)\n\n    if (i > -1) handlers.splice(i, 1)\n  }\n\n  emit (eventType: string, e: Event): void {\n    const handlers = this.handlers[eventType]\n    if (!handlers || handlers.length === 0) return\n\n    handlers.forEach(cb => cb(e))\n  }\n\n  destroy (): void {\n    disposeEvent(this)\n  }\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, unref as _unref, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-f23fadc6\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  key: 0,\n  class: \"tool-divider\"\n}\nconst _hoisted_2 = [\"onClick\"]\n\nimport { inject } from 'vue'\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\nconst setting = inject('setting')\nconst pens = [\n  { name: 'Pen', icon: 'icon-pen1' },\n  // { name: 'Pencil', icon: 'icon-pen' },\n  // { name: 'MarkPen', icon: 'icon-mark-pen-fill' },\n  // { name: 'SoftPen', icon: 'icon-Brush-' },\n  { name: 'Eraser', icon: 'icon-eraser' },\n]\nconst setPainter = (painter: string) => {\n  setting.painter = painter\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, _renderList(pens, (p, i) => {\n    return (_openBlock(), _createElementBlock(_Fragment, { key: i }, [\n      (p.name === 'divider')\n        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_1))\n        : (_openBlock(), _createElementBlock(\"span\", {\n            key: 1,\n            class: _normalizeClass([\"iconfont\", p.name === _unref(setting).painter ? \"is-active \" + p.icon : p.icon]),\n            onClick: ($event: any) => (setPainter(p.name))\n          }, null, 10, _hoisted_2))\n    ], 64))\n  }), 64))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=f23fadc6&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/baoyukun/Workspace/canvas/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f23fadc6\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-858982ae\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"panel\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"panel-header\" }, \" 粗细 \", -1))\nconst _hoisted_3 = { class: \"panel-body\" }\nconst _hoisted_4 = { class: \"size-wrap flex\" }\nconst _hoisted_5 = [\"onClick\"]\nconst _hoisted_6 = { class: \"panel-body\" }\n\nimport { inject } from 'vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\nconst sizes = [1, 5, 10, 15, 20, 25]\nconst setting = inject('setting')\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_slider = _resolveComponent(\"el-slider\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createElementVNode(\"div\", _hoisted_4, [\n        (_openBlock(), _createElementBlock(_Fragment, null, _renderList(sizes, (s) => {\n          return _createElementVNode(\"span\", {\n            class: \"size\",\n            key: s,\n            onClick: ($event: any) => (_unref(setting).painterSize=s)\n          }, [\n            _createElementVNode(\"span\", {\n              class: \"size-inner\",\n              style: _normalizeStyle({\n              width: s + 'px',\n              height: s + 'px',\n            })\n            }, null, 4)\n          ], 8, _hoisted_5)\n        }), 64))\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _createVNode(_component_el_slider, {\n        modelValue: _unref(setting).painterSize,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(setting).painterSize) = $event)),\n        min: 1,\n        max: 50\n      }, null, 8, [\"modelValue\"])\n    ])\n  ]))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=858982ae&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/baoyukun/Workspace/canvas/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-858982ae\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-92ac15c6\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"sizeicon\" }, null, -1))\nconst _hoisted_2 = [\n  _hoisted_1\n]\n\nimport { inject } from 'vue'\nimport Drawer from './drawer/index.vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\nconst openDrawer = inject('openDrawer')\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"span\", {\n    class: \"iconfont\",\n    onClick: _cache[0] || (_cache[0] = ($event: any) => (_unref(openDrawer)(Drawer)))\n  }, _hoisted_2))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=92ac15c6&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/baoyukun/Workspace/canvas/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-92ac15c6\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-29340ca2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"panel\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"panel-header\" }, \" 最近使用 \", -1))\nconst _hoisted_3 = { class: \"panel-body\" }\nconst _hoisted_4 = { class: \"color-panel\" }\nconst _hoisted_5 = [\"onClick\"]\nconst _hoisted_6 = { class: \"panel\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"panel-header\" }, \" 常用颜色 \", -1))\nconst _hoisted_8 = { class: \"panel-body\" }\nconst _hoisted_9 = { class: \"color-panel\" }\nconst _hoisted_10 = [\"onClick\"]\nconst _hoisted_11 = { class: \"panel\" }\nconst _hoisted_12 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"panel-header\" }, \" 全部颜色 \", -1))\nconst _hoisted_13 = { class: \"panel-body\" }\n\nimport { watch, ref, inject } from 'vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'color',\n  props: ['color', 'colorUsed'],\n  emits: ['update:color', 'update:colorUsed'],\n  setup(__props, { emit }) {\n\nconst props = __props\n\n\n\nconst colorValue = ref(props.color)\nconst colorUsed = ref(props.colorUsed)\nconst closeDrawer = inject('closeDrawer')\n\nlet colors = []\nconst hex = (n: number): string => {\n  const h = n.toString(16);\n  return h.length < 2 ? `${h}${h}` : h\n}\nconst n = 64\nfor (let r = 0; r <= 255; r += n) {\n  for (let g = 0; g <= 255; g += n) {\n    for (let b = 0; b <= 255; b += n) {\n      colors.push(`#${hex(r)}${hex(g)}${hex(b)}`)\n    }\n  }\n}\n\nwatch(colorValue, (v: string) => {\n  if (colorUsed.value.includes(v)) {\n    const i = colorUsed.value.indexOf(v)\n    colorUsed.value.splice(i, 1)\n  } else if (colorUsed.value.length === 10) {\n    colorUsed.value.pop()\n  }\n  \n  colorUsed.value.unshift(v)\n  emit('update:color', v)\n  emit('update:colorUsed', colorUsed.value)\n  closeDrawer()\n})\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_color_picker = _resolveComponent(\"el-color-picker\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(colorUsed.value, (c) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              class: _normalizeClass([\"color-grid\", { \"is-active\": c === colorValue.value }]),\n              key: c,\n              style: _normalizeStyle({ backgroundColor: c }),\n              onClick: ($event: any) => (colorValue.value = c)\n            }, null, 14, _hoisted_5))\n          }), 128))\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _hoisted_7,\n      _createElementVNode(\"div\", _hoisted_8, [\n        _createElementVNode(\"div\", _hoisted_9, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(colors), (c) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              class: _normalizeClass([\"color-grid\", { \"is-active\": c === colorValue.value }]),\n              key: c,\n              style: _normalizeStyle({ backgroundColor: c }),\n              onClick: ($event: any) => (colorValue.value = c)\n            }, null, 14, _hoisted_10))\n          }), 128))\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_11, [\n      _hoisted_12,\n      _createElementVNode(\"div\", _hoisted_13, [\n        _createVNode(_component_el_color_picker, {\n          modelValue: colorValue.value,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((colorValue).value = $event)),\n          \"show-alpha\": \"\"\n        }, null, 8, [\"modelValue\"])\n      ])\n    ])\n  ], 64))\n}\n}\n\n})","import script from \"./color.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./color.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./color.vue?vue&type=style&index=0&id=29340ca2&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/baoyukun/Workspace/canvas/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-29340ca2\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { inject } from 'vue'\nimport Color from './color.vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\nconst setting = inject('setting')\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(Color, {\n    color: _unref(setting).color,\n    \"onUpdate:color\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(setting).color) = $event)),\n    colorUsed: _unref(setting).colorUsed,\n    \"onUpdate:colorUsed\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(setting).colorUsed) = $event))\n  }, null, 8, [\"color\", \"colorUsed\"]))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { inject } from 'vue'\nimport Drawer from './drawer'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\nconst openDrawer = inject('openDrawer')\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"span\", {\n    class: \"iconfont icon-color-filling\",\n    onClick: _cache[0] || (_cache[0] = ($event: any) => (_unref(openDrawer)(_unref(Drawer))))\n  }))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { inject } from 'vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\nconst cvs = inject('cvs')\nconst setting = inject('setting')\nconst undo = () => {\n  if (setting.index < 0) return\n  cvs.layers = setting.his.slice(0, setting.index)\n  setting.index--\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"span\", {\n    class: \"iconfont icon-Undo\",\n    onClick: undo\n  }))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { inject } from 'vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\nconst cvs = inject('cvs')\nconst setting = inject('setting')\nconst redo = () => {\n  if (setting.index === setting.his.length - 1) return\n  setting.index++\n  cvs.layers = setting.his.slice(0, setting.index + 1)\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"span\", {\n    class: \"iconfont icon-Redo\",\n    onClick: redo\n  }))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"iconfont icon-delete\" }, null, -1)\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\" 清除屏幕 \")\nconst _hoisted_3 = [\n  _hoisted_1,\n  _hoisted_2\n]\n\nimport { inject } from 'vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\nconst cvs = inject('cvs')\nconst setting = inject('setting')\nconst clear = () => {\n  cvs.layers = []\n  setting.his = []\n  setting.index = -1\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"span\", {\n    style: {\"color\":\"red\"},\n    onClick: clear\n  }, _hoisted_3))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1de6035a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"长按保存图片\", -1))\nconst _hoisted_2 = { class: \"img-wrap\" }\nconst _hoisted_3 = [\"src\"]\n\nimport { inject } from 'vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\nconst cvs = inject('cvs')\nconst src = cvs.dom.toDataURL()\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _hoisted_1,\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"img\", { src: _unref(src) }, null, 8, _hoisted_3)\n    ])\n  ], 64))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=1de6035a&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/baoyukun/Workspace/canvas/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1de6035a\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"iconfont icon-download\" }, null, -1)\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\" 导出图片 \")\nconst _hoisted_3 = [\n  _hoisted_1,\n  _hoisted_2\n]\n\nimport { inject } from 'vue'\nimport Drawer from './drawer/index.vue'\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\nconst openDrawer = inject('openDrawer')\n\n// const cvs = inject('cvs')\n// const download = () => {\n//   const a = document.createElement('a')\n//   a.download = Date.now() + '.png'\n//   a.href = cvs.dom.toDataURL()\n//   const e = new MouseEvent('click')\n//   a.dispatchEvent(e)\n// }\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"span\", {\n    onClick: _cache[0] || (_cache[0] = ($event: any) => (_unref(openDrawer)(Drawer)))\n  }, _hoisted_3))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { inject } from 'vue'\nimport Color from '../../color/drawer/color.vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\nconst setting = inject('setting')\nconst cvs = inject('cvs')\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(Color, {\n    color: _unref(cvs).backgroundColor,\n    \"onUpdate:color\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(cvs).backgroundColor) = $event)),\n    colorUsed: _unref(setting).backgroundColorUsed,\n    \"onUpdate:colorUsed\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(setting).backgroundColorUsed) = $event))\n  }, null, 8, [\"color\", \"colorUsed\"]))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"iconfont icon-background-f\" }, null, -1)\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\" 背景颜色 \")\nconst _hoisted_3 = [\n  _hoisted_1,\n  _hoisted_2\n]\n\nimport { inject } from 'vue'\nimport Drawer from './drawer/index.vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\nconst openDrawer = inject('openDrawer')\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"span\", {\n    onClick: _cache[0] || (_cache[0] = ($event: any) => (_unref(openDrawer)(Drawer)))\n  }, _hoisted_3))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"iconfont icon-marquee\" }, null, -1)\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\" 重置视口 \")\nconst _hoisted_3 = [\n  _hoisted_1,\n  _hoisted_2\n]\n\nimport { inject } from 'vue'\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\nconst cvs = inject('cvs')\nconst resetViewport = (): void => {\n  cvs.x = 0\n  cvs.y = 0\n  cvs.scale = 1\n  cvs.rotation = 0\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"span\", { onClick: resetViewport }, _hoisted_3))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"iconfont icon-menu\" }, null, -1)\n\nimport Clear from '../clear/index.vue'\nimport Export from '../export/index.vue'\nimport Background from '../background/index.vue';\nimport ResetViewport from '../resetViewport/index.vue';\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_dropdown_item = _resolveComponent(\"el-dropdown-item\")!\n  const _component_el_dropdown_menu = _resolveComponent(\"el-dropdown-menu\")!\n  const _component_el_dropdown = _resolveComponent(\"el-dropdown\")!\n\n  return (_openBlock(), _createBlock(_component_el_dropdown, { placement: \"top\" }, {\n    dropdown: _withCtx(() => [\n      _createVNode(_component_el_dropdown_menu, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_el_dropdown_item, null, {\n            default: _withCtx(() => [\n              _createVNode(Background)\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_dropdown_item, null, {\n            default: _withCtx(() => [\n              _createVNode(ResetViewport)\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_dropdown_item, null, {\n            default: _withCtx(() => [\n              _createVNode(Export)\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_dropdown_item, { divided: \"\" }, {\n            default: _withCtx(() => [\n              _createVNode(Clear)\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    default: _withCtx(() => [\n      _hoisted_1\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1a18273b\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"menu\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"tool-divider\" }, null, -1))\n\nimport Pen from '../tools/pen/index.vue'\nimport Size from '../tools/size/index.vue'\nimport Color from '../tools/color/index.vue'\nimport Undo from '../tools/undo/index.vue'\nimport Redo from '../tools/redo/index.vue'\nimport MoreOptions from '../tools/more/index.vue'\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(Pen),\n    _hoisted_2,\n    _createVNode(Color),\n    _createVNode(Size),\n    _createVNode(Undo),\n    _createVNode(Redo),\n    _createVNode(MoreOptions)\n  ]))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=1a18273b&scoped=true&lang=scss\"\nimport \"./index.vue?vue&type=style&index=1&id=1a18273b&lang=css\"\n\nimport exportComponent from \"/Users/baoyukun/Workspace/canvas/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1a18273b\"]])\n\nexport default __exports__","import { ref, Ref } from 'vue'\n\nexport const logs: Ref<string[]> = ref([])\nexport const log = (str: string): void => {\n  if (logs.value.length > 100) logs.value.shift()\n  logs.value.push(str)\n}","import Layer from '@/modules/canvas/layer';\nimport { reactive } from 'vue'\n\nconst setting = reactive<{\n  mode: string;\n  backgroundColor: string;\n  color: string;\n  painter: string;\n  painterSize: number;\n  his: Layer[];\n  index: number;\n  colorUsed: string[];\n  backgroundColorUsed: string[];\n}>({\n  mode: 'default',\n  backgroundColor: '#f0f0f0',\n  color: '#000',\n  painter: 'Pen',\n  painterSize: 1,\n  his: [],\n  index: -1,\n  colorUsed: ['#000000', '#ff0000', '#ffffff'],\n  backgroundColorUsed: ['#000000', '#ff0000', '#ffffff'],\n})\n\nexport default setting","import Canvas from \"@/modules/canvas/\"\nimport setting from \"../setting\"\nimport Coord from '@/modules/coord'\n\nlet x0: number, x1: number, y0: number, y1: number;\n\nexport default function (cvs: Canvas): void {\n  cvs.on('touchstart', e => {\n    const ev = e as TouchEvent\n    if (setting.mode === 'default') {\n      if (ev.touches.length === 2) {\n        x0 = ev.touches[0].pageX\n        y0 = ev.touches[0].pageY\n        x1 = ev.touches[1].pageX\n        y1 = ev.touches[1].pageY\n      }\n    }\n  })\n\n  cvs.on('touchmove', e => {\n    const ev = e as TouchEvent\n    if (ev.touches.length === 2) {\n      const _x0 = ev.touches[0].pageX\n      const _y0 = ev.touches[0].pageY\n      const _x1 = ev.touches[1].pageX\n      const _y1 = ev.touches[1].pageY\n      const v = new Coord(x1 - x0, y1 - y0)\n      const _v = new Coord(_x1 - _x0, _y1 - _y0)\n      const ang = v.angle(_v.x, _v.y)\n      const angle = v.cross(_v.x, _v.y) > 0 ? ang : -ang\n      const k = _v.norm() / v.norm()\n      const c0 = cvs.getRelativeCoord((x0 + x1) / 2, (y0 + y1) / 2)\n      \n      cvs.rotation += angle\n      cvs.scale *= k\n      c0.rotate(cvs.rotation)\n        .scale(cvs.scale, cvs.scale)\n      const c1 = new Coord((_x0 + _x1) / 2, (_y0 + _y1) / 2).move(-c0.x, -c0.y)\n      cvs.x = c1.x\n      cvs.y = c1.y\n\n      x0 = _x0\n      x1 = _x1\n      y0 = _y0\n      y1 = _y1\n    }\n  })\n}","export default abstract class Layer {\n  abstract readonly type: string;\n  abstract draw (ctx: CanvasRenderingContext2D): void\n}","import { IPainter } from './painter'\n\nexport default function (path: number[], ctx: CanvasRenderingContext2D, painterOption: IPainter): void {\n  if (path.length === 2) {\n    ctx.beginPath()\n    ctx.arc(path[0], path[1], painterOption.size / 2, 0, Math.PI * 2)\n    ctx.closePath()\n    ctx.fillStyle = painterOption.color\n    ctx.fill()\n  } else {\n    ctx.beginPath()\n    ctx.moveTo(path[0], path[1])\n    for (let i = 2; i < path.length; i += 2) {\n      ctx.lineTo(path[i], path[i + 1])\n    }\n    ctx.strokeStyle = painterOption.color\n    ctx.lineWidth = painterOption.size\n    ctx.lineCap = 'round'\n    ctx.lineJoin = 'round'\n    ctx.stroke()\n    ctx.closePath()\n  }\n\n}","import { IPainter } from './painter'\n\nexport default function (path: number[], ctx: CanvasRenderingContext2D, painterOption: IPainter): void {\n  if (path.length < 4) return\n\n  ctx.beginPath()\n  ctx.moveTo(path[0], path[1])\n  for (let i = 2; i < path.length; i += 2) {\n    ctx.lineTo(path[i], path[i + 1])\n  }\n  ctx.strokeStyle = painterOption.color\n  ctx.lineWidth = painterOption.size\n  ctx.lineCap = 'round'\n  ctx.lineJoin = 'round'\n  ctx.stroke()\n  ctx.closePath()\n}","import { IPainter } from './painter'\n\nexport default function (path: number[], ctx: CanvasRenderingContext2D, painterOption: IPainter): void {\n  if (path.length < 4) return\n\n  ctx.beginPath()\n  ctx.moveTo(path[0], path[1])\n  for (let i = 2; i < path.length; i += 2) {\n    ctx.lineTo(path[i], path[i + 1])\n  }\n  ctx.strokeStyle = painterOption.color\n  ctx.lineWidth = painterOption.size\n  ctx.lineCap = 'butt'\n  ctx.lineJoin = 'round'\n  ctx.stroke()\n  ctx.closePath()\n}","import { IPainter } from './painter'\n\nexport default function (path: number[], ctx: CanvasRenderingContext2D, painterOption: IPainter): void {\n  if (path.length < 4) return\n\n  ctx.globalCompositeOperation = 'destination-out'\n  ctx.beginPath()\n  ctx.moveTo(path[0], path[1])\n  for (let i = 2; i < path.length; i += 2) {\n    ctx.lineTo(path[i], path[i + 1])\n  }\n  ctx.strokeStyle = painterOption.color\n  ctx.lineWidth = painterOption.size\n  ctx.lineCap = 'round'\n  ctx.lineJoin = 'round'\n  ctx.stroke()\n  ctx.closePath()\n}","import { IPainter } from './painter'\nimport Coord from '@/modules/coord'\n\nexport default function (path: number[], ctx: CanvasRenderingContext2D, painterOption: IPainter): void {\n  if (path.length < 4) return\n  ctx.fillStyle = painterOption.color\n  ctx.strokeStyle = painterOption.color\n  const scale = painterOption.scale as number\n  const size = painterOption.size\n  let lw0 = size / 8\n  for (let i = 0; i < path.length - 2; i += 2) {\n    let x0 = path[i]\n    let y0 = path[i + 1]\n    const x1 = path[i + 2]\n    const y1 = path[i + 3]\n    const n = new Coord(x1 - x0, y1 - y0).norm() / scale\n    if (n <= 1) {\n      ctx.beginPath()\n      ctx.moveTo(x0, y0)\n      ctx.lineTo(x1, y1)\n      ctx.stroke()\n      ctx.closePath()\n    } else {\n      const lw1 = Math.min(size * 5 / n, size / 2, lw0 * 1.3)\n      const dw = (lw1 - lw0) / n\n      const dx = (x1 - x0) / n\n      const dy = (y1 - y0) / n\n      for (let i = 0; i < n; i += 1) {\n        if (lw0 > 0) {\n          ctx.beginPath()\n          ctx.arc(x0, y0, lw0, 0, Math.PI * 2)\n          ctx.closePath()\n          ctx.fill()\n        }\n        x0 += dx\n        y0 += dy\n        lw0 += dw\n      }\n    }\n  }\n}","import drawPen from './pen'\nimport drawPencil from './pencil'\nimport drawMarkPen from './markPen'\nimport drawEraser from './eraser'\nimport drawSoftPen from './softPen'\n\nimport { IPainter } from './painter'\n\nexport default function (path: number[], ctx: CanvasRenderingContext2D, painterOption: IPainter): void {\n  switch (painterOption.type) {\n    case 'MarkPen':\n      return drawMarkPen(path, ctx, painterOption)\n    case 'Pencil':\n      return drawPencil(path, ctx, painterOption)\n    case 'Eraser':\n      return drawEraser(path, ctx, painterOption)\n    case 'SoftPen':\n      return drawSoftPen(path, ctx, painterOption)\n    default:\n      return drawPen(path, ctx, painterOption)\n  }\n}","import Layer from \".\"\nimport draw from \"../painter\";\nimport { IPainter } from \"../painter/painter\";\n\nexport default class Path extends Layer {\n  type = 'Path'\n  painter: IPainter\n  data: number[] = []\n\n  constructor (painter: IPainter) {\n    super()\n\n    this.painter = painter\n  }\n\n  draw (ctx: CanvasRenderingContext2D): void {\n    draw(this.data, ctx, this.painter)\n  }\n}","import Canvas from \"@/modules/canvas/\"\nimport Path from \"@/modules/canvas/layer/path\"\nimport setting from \"../setting\"\nimport { IPainter } from \"@/modules/canvas/painter/painter\";\n\nlet path: Path | null = null;\nlet moved = false;\nconst offsetY = 45;\n\nexport default function (cvs: Canvas): void {\n  cvs.on('touchstart', e => {\n    const ev = e as TouchEvent\n    if (setting.mode === 'default') {\n      if (ev.touches.length === 1) {\n        const painter: IPainter = {\n          type: setting.painter,\n          size: setting.painterSize,\n          color: setting.color,\n        }\n        const c = cvs.getRelativeCoord(ev.touches[0].pageX, ev.touches[0].pageY - offsetY)\n        path = new Path(painter)\n        path.data.push(c.x, c.y)\n      }\n    }\n  })\n\n  cvs.on('touchmove', e => {\n    const ev = e as TouchEvent\n    if (ev.touches.length === 1) {\n      if (path) {\n        const c = cvs.getRelativeCoord(ev.touches[0].pageX, ev.touches[0].pageY - offsetY)\n        path.data.push(c.x, c.y)\n        if (!moved) {\n          moved = true;\n          cvs.layers.push(path)\n          setting.his = [...cvs.layers]\n          setting.index++\n        }\n      }\n    }\n  })\n\n  cvs.on('touchend', () => {\n    moved = false;\n    if (path) {\n      path = null\n    }\n  })\n}","export default function magicWand (imageData: ImageData, px: number, py: number, threshold = 80): number[][] {\n  const distance = (p1: number[], p2: number[], threshold: number): boolean => {\n    let sum = 0;\n    for (let i = 0; i < 4; i++) {\n      sum += Math.abs(p1[i] - p2[i])\n      if (sum > threshold) return false;\n    }\n    return true;\n  }\n\n  const d = imageData.data;\n  const w = imageData.width;\n  const h = imageData.height;\n  const checked = new Set();\n  const res = [[px, py]];\n  const i = (py * w + px) * 4;\n  const p0 = [d[i], d[i + 1], d[i + 2], d[i + 3]];\n\n  const check = (x: number, y: number) => {\n    if (checked.has(`${x},${y}`)) return\n    checked.add(`${x},${y}`);\n\n    const i = (y * w + x) * 4;\n    if (distance(p0, [d[i], d[i + 1], d[i + 2], d[i + 3]], threshold)) {\n      res.push([x, y])\n    }\n  }\n\n  let index = 0\n  while (index < res.length) {\n    const [x, y] = res[index];\n    \n    if (y > 0) check(x, y - 1)\n    if (x > 0) check(x - 1, y)\n    if (x < w - 1) check(x + 1, y)\n    if (y < h - 1) check(x, y + 1)\n    index++;\n  }\n\n  return res;\n}","import Layer from \".\"\n\nexport default class Path extends Layer {\n  type = 'Rasterized'\n  x = 0\n  y = 0\n  width = 100\n  height = 100\n  rotation = 0\n  img: HTMLCanvasElement\n\n  constructor (img: HTMLCanvasElement, x: number, y: number, w: number, h: number, rotation: number) {\n    super()\n    this.img = img\n    this.x = x\n    this.y = y\n    this.width = w\n    this.height = h\n    this.rotation = rotation\n  }\n\n  draw (ctx: CanvasRenderingContext2D): void {\n    ctx.translate(this.x, this.y)\n    ctx.rotate(this.rotation)\n    ctx.drawImage(this.img, 0, 0, this.width, this.height)\n  }\n}","import Canvas from \"@/modules/canvas/\"\nimport setting from \"../setting\"\nimport magicWand from \"@/modules/canvas/utils/magicWand\"\nimport Rasterized from '@/modules/canvas/layer/Rasterized'\n\nlet moved = false\nlet x: number, y: number\nlet flag = false\nconst offsetY = 45;\n\nexport default function (cvs: Canvas): void {\n  cvs.on('touchstart', e => {\n    const ev = e as TouchEvent\n    if (ev.touches.length === 1) {\n      moved = false\n      flag = true\n      x = Math.floor(ev.touches[0].pageX)\n      y = Math.floor(ev.touches[0].pageY - offsetY)\n    }\n  })\n\n  cvs.on('touchmove', () => {\n    moved = true;\n  })\n\n  cvs.on('touchend', () => {\n    if (!moved && flag) {\n      const imageData = cvs.ctx.getImageData(0, 0, cvs.width, cvs.height)\n      const res = magicWand(imageData, x, y, 50)\n      let x0 = res[0][0]\n      let x1 = x0\n      let y0 = res[0][1]\n      let y1 = y0\n      res.forEach(([_x, _y]) => {\n        if (x0 === undefined || _x < x0) x0 = _x\n        if (y0 === undefined || _y < y0) y0 = _y\n        if (x1 === undefined || _x > x1) x1 = _x\n        if (y1 === undefined || _y > y1) y1 = _y\n      })\n      const _cvs = document.createElement('canvas')\n      _cvs.width = x1 - x0 + 1\n      _cvs.height = y1 - y0 + 1\n      const _ctx = _cvs.getContext('2d') as CanvasRenderingContext2D;\n      _ctx.fillStyle = setting.color\n      res.forEach(([px, py]) => _ctx.fillRect(px - x0, py - y0, 1, 1))\n      const v = cvs.getRelativeCoord(x0, y0)\n      const w = Math.round((x1 - x0) / cvs.scale)\n      const h = Math.round((y1 - y0) / cvs.scale)\n      const layer = new Rasterized(_cvs, v.x, v.y, w, h, -cvs.rotation)\n      cvs.layers.push(layer)\n      setting.his = [...cvs.layers]\n      setting.index++\n    }\n    moved = false\n    flag = false\n  })\n}","import Canvas from \"@/modules/canvas\";\nimport panzoom from \"./panzoom\";\nimport draw from \"./draw\";\nimport buket from \"./buket\";\n\nexport default function (cvs: Canvas): void {\n  draw(cvs)\n  panzoom(cvs)\n  buket(cvs)\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { withModifiers as _withModifiers, createVNode as _createVNode, createElementVNode as _createElementVNode, resolveDynamicComponent as _resolveDynamicComponent, openBlock as _openBlock, createBlock as _createBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Transition as _Transition, withCtx as _withCtx, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5c575d3a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"page-wrap flex-v\" }\nconst _hoisted_2 = { key: 0 }\nconst _hoisted_3 = { class: \"drawer-wrap\" }\n\nimport { ref, onMounted, onBeforeMount, provide, markRaw, watch, nextTick, VueElement } from 'vue'\nimport Canvas from '@/modules/canvas'\nimport Menus from './components/menus/index.vue'\nimport { logs } from './log'\nimport initEvent from './event/index'\nimport setting from './setting'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\nconst cvsWrap = ref()\nconst logRef = ref()\nconst Drawer = ref()\nconst closeDrawer = (): void => { Drawer.value = null }\nconst cvs = new Canvas()\nconst expandLog = ref(true)\nlet animateId: number | null = null\n\nconst render = () => {\n  cvs.drawFrame()\n  animateId = window.requestAnimationFrame(render)\n}\n\nprovide(\n  'openDrawer',\n  (drawer: VueElement): void => {\n    Drawer.value = markRaw(drawer)\n  }\n)\nprovide('closeDrawer', closeDrawer)\nprovide('cvs', cvs)\nprovide('setting', setting)\n\nonMounted(() => {\n  cvs.mount(cvsWrap.value)\n  initEvent(cvs)\n  render()\n})\n\nonBeforeMount(() => {\n  if (animateId) window.cancelAnimationFrame(animateId)\n})\n\nwatch([logs.value, expandLog], () => {\n  nextTick(() => {\n    logRef.value.scrollTop = 9999999\n  });\n})\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(Menus, {\n        class: \"flex-item\",\n        onGesturestart: _cache[0] || (_cache[0] = _withModifiers(() => {}, [\"prevent\"]))\n      }),\n      _createElementVNode(\"div\", {\n        ref_key: \"cvsWrap\",\n        ref: cvsWrap,\n        class: \"flex-main\"\n      }, null, 512)\n    ]),\n    _createVNode(_Transition, { name: \"drawer\" }, {\n      default: _withCtx(() => [\n        (Drawer.value)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n              _createElementVNode(\"div\", {\n                class: \"modal\",\n                onClick: closeDrawer\n              }),\n              _createElementVNode(\"div\", _hoisted_3, [\n                _createElementVNode(\"span\", {\n                  class: \"closeicon iconfont icon-halfscreen\",\n                  onClick: closeDrawer\n                }),\n                (_openBlock(), _createBlock(_resolveDynamicComponent(Drawer.value)))\n              ])\n            ]))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _: 1\n    })\n  ], 64))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./index.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./index.vue?vue&type=style&index=0&id=5c575d3a&scoped=true&lang=scss\"\nimport \"./index.vue?vue&type=style&index=1&id=5c575d3a&lang=css\"\n\nimport exportComponent from \"/Users/baoyukun/Workspace/canvas/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5c575d3a\"]])\n\nexport default __exports__","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=1a18273b&scoped=true&lang=scss\"","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=92ac15c6&scoped=true&lang=scss\"","export * from \"-!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./color.vue?vue&type=style&index=0&id=29340ca2&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=5c575d3a&scoped=true&lang=scss\"","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=f23fadc6&scoped=true&lang=scss\""],"sourceRoot":""}