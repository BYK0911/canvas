(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{"0256":function(e,t,n){},"1ef5":function(e,t,n){"use strict";n("685a")},"22fd":function(e,t,n){},"29f1":function(e,t,n){"use strict";n("0256")},"685a":function(e,t,n){},"7a32":function(e,t,n){"use strict";n("c209")},"7abe":function(e,t,n){"use strict";n.r(t);var c=n("7a23");const o=(e,t)=>{t.preventDefault(),e.emit("touchstart",t)},a=(e,t)=>{t.preventDefault(),e.emit("touchmove",t)},l=(e,t)=>{t.preventDefault(),e.emit("touchend",t)};function r(e){e.dom.addEventListener("touchstart",o.bind(e.dom,e)),e.dom.addEventListener("touchmove",a.bind(e.dom,e)),e.dom.addEventListener("touchend",l.bind(e.dom,e))}function s(e){e.dom.removeEventListener("touchstart",o.bind(e.dom,e)),e.dom.removeEventListener("touchmove",a.bind(e.dom,e)),e.dom.removeEventListener("touchend",l.bind(e.dom,e))}class i{constructor(e,t){this.x=e,this.y=t}matrix(e,t,n,c,o,a){const l=this.x,r=this.y;return this.x=e*l+t*r+n,this.y=c*l+o*r+a,this}translate(e,t){return this.x+=e,this.y+=t,this}move(e,t){return this.translate(e,t)}rotate(e){const t=e/180*Math.PI,n=Math.cos(t),c=Math.sin(t);return this.matrix(n,-c,0,c,n,0),this}scale(e,t){return this.x*=e,this.y*=t,this}skewX(e){e=e/180*Math.PI;const t=Math.tan(e);return this.matrix(1,t,0,0,1,0)}skewY(e){e=e/180*Math.PI;const t=Math.tan(e);return this.matrix(1,0,0,t,1,0)}norm(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalVector(){const e=this.norm();return 0===e?this:new i(this.y/e,-this.x/e)}unit(){const e=this.norm();return 0===e?this:new i(this.x/e,this.y/e)}angle(e=1,t=0){const n=this.norm(),c=Math.sqrt(e*e+t*t);if(n*c===0)return 0;const o=this.dot(e,t),a=Math.max(-1,Math.min(1,o/n/c));return Math.acos(a)}dot(e,t){return this.x*e+this.y*t}cross(e,t){return this.x*t-this.y*e}flip(e,t,n,c){const{x:o,y:a}=this,[l,r]=[o-e,a-t],[s,i]=[n-e,c-t];if(0!==s||0!==i){const n=s*s+i*i;this.x=(l*(s*s-i*i)+2*r*s*i)/n+e,this.y=(r*(i*i-s*s)+2*l*s*i)/n+t}return this}}class d{constructor(){this.x=0,this.y=0,this.scale=1,this.rotation=0,this.mode="default",this.backgroundColor="#f0f0f0",this.width=400,this.height=300,this.layers=[],this.handlers={},this.dom=this.initDom(),this.ctx=this.dom.getContext("2d"),r(this)}initDom(){const e=document.createElement("canvas");return e.width=this.width,e.height=this.height,Object.assign(e.style,{width:this.width+"px",height:this.height+"px",background:"#f0f0f0",verticalAlign:"middle"}),e}mount(e){e.appendChild(this.dom);const t=e.offsetWidth,n=e.offsetHeight;this.resize(t,n)}resize(e,t){this.width=e,this.height=t,this.dom.width=e,this.dom.height=t,this.dom.style.width=e+"px",this.dom.style.height=t+"px"}drawFrame(){const{x:e,y:t,scale:n,width:c,height:o,layers:a,ctx:l,backgroundColor:r,rotation:s}=this;l.clearRect(0,0,c,o),l.fillStyle=r,l.fillRect(0,0,c,o),l.save(),l.translate(e,t),l.scale(n,n),l.rotate(s/180*Math.PI),a.forEach(e=>{l.save(),e.draw(l),l.restore()}),l.restore()}getRelativeCoord(e,t){return new i(e,t).translate(-this.x,-this.y).scale(1/this.scale,1/this.scale).rotate(-this.rotation)}on(e,t){this.handlers[e]||(this.handlers[e]=[]);const n=this.handlers[e];n.push(t)}off(e,t){if(!this.handlers[e])return;if(!t)return void(this.handlers[e]=[]);const n=this.handlers[e],c=n.indexOf(t);c>-1&&n.splice(c,1)}emit(e,t){const n=this.handlers[e];n&&0!==n.length&&n.forEach(e=>e(t))}destroy(){s(this)}}const u=e=>(Object(c["pushScopeId"])("data-v-091d2b66"),e=e(),Object(c["popScopeId"])(),e),b={class:"panel"},h=u(()=>Object(c["createElementVNode"])("div",{class:"panel-header"}," 类型 ",-1)),j={class:"panel-body"},O=["onClick"],p={class:"panel"},m=u(()=>Object(c["createElementVNode"])("div",{class:"panel-header"}," 粗细 ",-1)),f={class:"panel-body"};var v=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("setting"),n=[{name:"Pen",icon:"icon-pen1"},{name:"Pencil",icon:"icon-pen"},{name:"MarkPen",icon:"icon-mark-pen-fill"},{name:"SoftPen",icon:"icon-Brush-"}];return(e,o)=>{const a=Object(c["resolveComponent"])("el-slider");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",b,[h,Object(c["createElementVNode"])("div",j,[(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(n,e=>Object(c["createElementVNode"])("span",{class:Object(c["normalizeClass"])(["iconfont penicon",e.name===Object(c["unref"])(t).painter?"is-active "+e.icon:e.icon]),key:e.name,style:Object(c["normalizeStyle"])({color:"Chalk"===e.name?"#aaa":"#000"}),onClick:n=>Object(c["unref"])(t).painter=e.name},null,14,O)),64))])]),Object(c["createElementVNode"])("div",p,[m,Object(c["createElementVNode"])("div",f,[Object(c["createVNode"])(a,{modelValue:Object(c["unref"])(t).painterSize,"onUpdate:modelValue":o[0]||(o[0]=e=>Object(c["unref"])(t).painterSize=e),min:1,max:50},null,8,["modelValue"])])])],64)}}}),k=(n("7c11"),n("6b0d")),g=n.n(k);const x=g()(v,[["__scopeId","data-v-091d2b66"]]);var C=x,w=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("openDrawer");return(e,n)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{class:"iconfont icon-pen",onClick:n[0]||(n[0]=e=>Object(c["unref"])(t)(C))}))}});const V=w;var y=V;const E={class:"iconfont icon-eraser"};function N(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("span",E)}const B={},_=g()(B,[["render",N]]);var U=_;const S=e=>(Object(c["pushScopeId"])("data-v-1c755cee"),e=e(),Object(c["popScopeId"])(),e),M={class:"panel"},P=S(()=>Object(c["createElementVNode"])("div",{class:"panel-header"}," 最近使用 ",-1)),z={class:"panel-body"},I={class:"color-panel"},D=["onClick"],T={class:"panel"},F=S(()=>Object(c["createElementVNode"])("div",{class:"panel-header"}," 常用颜色 ",-1)),L={class:"panel-body"},R={class:"color-panel"},X=["onClick"],Y={class:"panel"},q=S(()=>Object(c["createElementVNode"])("div",{class:"panel-header"}," 全部颜色 ",-1)),J={class:"panel-body"};var W=Object(c["defineComponent"])({__name:"color",props:["color","colorUsed"],emits:["update:color","update:colorUsed"],setup(e,{emit:t}){const n=e,o=Object(c["ref"])(n.color),a=Object(c["ref"])(n.colorUsed),l=Object(c["inject"])("closeDrawer");let r=[];const s=e=>{const t=e.toString(16);return t.length<2?`${t}${t}`:t},i=64;for(let c=0;c<=255;c+=i)for(let e=0;e<=255;e+=i)for(let t=0;t<=255;t+=i)r.push(`#${s(c)}${s(e)}${s(t)}`);return Object(c["watch"])(o,e=>{t("update:color",e),a.value.includes(e)||(10===a.value.length&&(a.value=a.value.slice(0,9)),a.value.unshift(e),t("update:colorUsed",a.value),l())}),(e,t)=>{const n=Object(c["resolveComponent"])("el-color-picker");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",M,[P,Object(c["createElementVNode"])("div",z,[Object(c["createElementVNode"])("div",I,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.value,e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:Object(c["normalizeClass"])(["color-grid",{"is-active":e===o.value}]),key:e,style:Object(c["normalizeStyle"])({backgroundColor:e}),onClick:t=>o.value=e},null,14,D))),128))])])]),Object(c["createElementVNode"])("div",T,[F,Object(c["createElementVNode"])("div",L,[Object(c["createElementVNode"])("div",R,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object(c["unref"])(r),e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:Object(c["normalizeClass"])(["color-grid",{"is-active":e===o.value}]),key:e,style:Object(c["normalizeStyle"])({backgroundColor:e}),onClick:t=>o.value=e},null,14,X))),128))])])]),Object(c["createElementVNode"])("div",Y,[q,Object(c["createElementVNode"])("div",J,[Object(c["createVNode"])(n,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e)},null,8,["modelValue"])])])],64)}}});n("ac2d");const $=g()(W,[["__scopeId","data-v-1c755cee"]]);var A=$,H=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("setting"),n=Object(c["inject"])("cvs");return(e,o)=>(Object(c["openBlock"])(),Object(c["createBlock"])(A,{color:Object(c["unref"])(n).backgroundColor,"onUpdate:color":o[0]||(o[0]=e=>Object(c["unref"])(n).backgroundColor=e),colorUsed:Object(c["unref"])(t).backgroundColorUsed,"onUpdate:colorUsed":o[1]||(o[1]=e=>Object(c["unref"])(t).backgroundColorUsed=e)},null,8,["color","colorUsed"]))}});const G=H;var K=G,Q=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("openDrawer");return(e,n)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{class:"iconfont icon-background-f",onClick:n[0]||(n[0]=e=>Object(c["unref"])(t)(Object(c["unref"])(K)))}))}});const Z=Q;var ee=Z,te=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("setting");return(e,n)=>(Object(c["openBlock"])(),Object(c["createBlock"])(A,{color:Object(c["unref"])(t).color,"onUpdate:color":n[0]||(n[0]=e=>Object(c["unref"])(t).color=e),colorUsed:Object(c["unref"])(t).colorUsed,"onUpdate:colorUsed":n[1]||(n[1]=e=>Object(c["unref"])(t).colorUsed=e)},null,8,["color","colorUsed"]))}});const ne=te;var ce=ne,oe=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("openDrawer");return(e,n)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{class:"iconfont icon-color-filling",onClick:n[0]||(n[0]=e=>Object(c["unref"])(t)(Object(c["unref"])(ce)))}))}});const ae=oe;var le=ae;const re=Object(c["createElementVNode"])("span",{class:"iconfont icon-more"},null,-1),se=Object(c["createElementVNode"])("span",{class:"iconfont icon-marquee"},null,-1),ie=Object(c["createTextVNode"])(" 矩形选择"),de=Object(c["createElementVNode"])("span",{class:"iconfont icon-polygon"},null,-1),ue=Object(c["createTextVNode"])(" 自由选择"),be=Object(c["createElementVNode"])("span",{class:"iconfont icon-hand-drag"},null,-1),he=Object(c["createTextVNode"])(" 拖拽移动");function je(e,t){const n=Object(c["resolveComponent"])("el-dropdown-item"),o=Object(c["resolveComponent"])("el-dropdown-menu"),a=Object(c["resolveComponent"])("el-dropdown");return Object(c["openBlock"])(),Object(c["createBlock"])(a,{style:{"vertical-align":"middle"}},{dropdown:Object(c["withCtx"])(()=>[Object(c["createVNode"])(o,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,null,{default:Object(c["withCtx"])(()=>[se,ie]),_:1}),Object(c["createVNode"])(n,null,{default:Object(c["withCtx"])(()=>[de,ue]),_:1}),Object(c["createVNode"])(n,null,{default:Object(c["withCtx"])(()=>[be,he]),_:1})]),_:1})]),default:Object(c["withCtx"])(()=>[re]),_:1})}const Oe={},pe=g()(Oe,[["render",je]]);var me=pe;const fe={class:"menu-bottom menu"};var ve=Object(c["defineComponent"])({__name:"BottomMenu",setup(e){return(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",fe,[Object(c["createVNode"])(y),Object(c["createVNode"])(U),Object(c["createVNode"])(le),Object(c["createVNode"])(ee),Object(c["createVNode"])(me)]))}});n("874c"),n("7a32");const ke=g()(ve,[["__scopeId","data-v-006e3065"]]);var ge=ke,xe=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("cvs"),n=Object(c["inject"])("setting"),o=()=>{n.index<0||(t.layers=n.his.slice(0,n.index),n.index--)};return(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{class:"iconfont icon-Undo",onClick:o}))}});const Ce=xe;var we=Ce,Ve=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("cvs"),n=Object(c["inject"])("setting"),o=()=>{n.index!==n.his.length-1&&(n.index++,t.layers=n.his.slice(0,n.index+1))};return(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{class:"iconfont icon-Redo",onClick:o}))}});const ye=Ve;var Ee=ye;const Ne=Object(c["createElementVNode"])("span",{class:"iconfont icon-delete"},null,-1),Be=Object(c["createTextVNode"])(" 清屏 "),_e=[Ne,Be];var Ue=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("cvs"),n=Object(c["inject"])("setting"),o=()=>{t.layers=[],n.his=[],n.index=-1};return(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{style:{color:"red"},onClick:o},_e))}});const Se=Ue;var Me=Se;const Pe=Object(c["createElementVNode"])("span",{class:"iconfont icon-download"},null,-1),ze=Object(c["createTextVNode"])(" 导出 "),Ie=[Pe,ze];function De(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("span",null,Ie)}const Te={},Fe=g()(Te,[["render",De]]);var Le=Fe;const Re=Object(c["createElementVNode"])("span",{class:"iconfont icon-s-operation"},null,-1);var Xe=Object(c["defineComponent"])({__name:"index",setup(e){return(e,t)=>{const n=Object(c["resolveComponent"])("el-dropdown-item"),o=Object(c["resolveComponent"])("el-dropdown-menu"),a=Object(c["resolveComponent"])("el-dropdown");return Object(c["openBlock"])(),Object(c["createBlock"])(a,{placement:"left"},{dropdown:Object(c["withCtx"])(()=>[Object(c["createVNode"])(o,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Le)]),_:1}),Object(c["createVNode"])(n,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Me)]),_:1})]),_:1})]),default:Object(c["withCtx"])(()=>[Re]),_:1})}}});const Ye=Xe;var qe=Ye,Je=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("cvs"),n=()=>{t.x=0,t.y=0,t.scale=1,t.rotation=0};return(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{class:"iconfont icon-marquee",onClick:n}))}});const We=Je;var $e=We;const Ae=e=>(Object(c["pushScopeId"])("data-v-28cf0982"),e=e(),Object(c["popScopeId"])(),e),He={class:"menu-right menu"},Ge=Ae(()=>Object(c["createElementVNode"])("span",{class:"divider-v"},null,-1));var Ke=Object(c["defineComponent"])({__name:"RightMenu",setup(e){return(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",He,[Object(c["createVNode"])(we),Object(c["createVNode"])(Ee),Object(c["createVNode"])($e),Ge,Object(c["createVNode"])(qe)]))}});n("29f1"),n("d07a");const Qe=g()(Ke,[["__scopeId","data-v-28cf0982"]]);var Ze=Qe;const et=Object(c["ref"])([]);class tt{}var nt=function(e,t,n){if(!(e.length<4)){t.beginPath(),t.moveTo(e[0],e[1]);for(let n=2;n<e.length;n+=2)t.lineTo(e[n],e[n+1]);t.strokeStyle=n.color,t.lineWidth=n.size,t.lineCap="round",t.lineJoin="round",t.stroke(),t.closePath()}},ct=function(e,t,n){if(!(e.length<4)){t.beginPath(),t.moveTo(e[0],e[1]);for(let n=2;n<e.length;n+=2)t.lineTo(e[n],e[n+1]);t.strokeStyle=n.color,t.lineWidth=n.size,t.lineCap="round",t.lineJoin="round",t.stroke(),t.closePath()}},ot=function(e,t,n){if(!(e.length<4)){t.beginPath(),t.moveTo(e[0],e[1]);for(let n=2;n<e.length;n+=2)t.lineTo(e[n],e[n+1]);t.strokeStyle=n.color,t.lineWidth=n.size,t.lineCap="butt",t.lineJoin="round",t.stroke(),t.closePath()}},at=function(e,t,n){switch(n.type){case"MarkPen":return ot(e,t,n);case"Pencil":return ct(e,t,n);default:return nt(e,t,n)}};class lt extends tt{constructor(e){super(),this.type="Path",this.data=[],this.painter=e}draw(e){at(this.data,e,this.painter)}}const rt=Object(c["reactive"])({mode:"default",backgroundColor:"#f0f0f0",color:"#000",painter:"Pen",painterSize:10,his:[],index:-1,colorUsed:["#000000","#ff0000","#ffffff"],backgroundColorUsed:["#000000","#ff0000","#ffffff"]});var st=rt;let it,dt,ut,bt,ht=null,jt=!1;var Ot=function(e){e.on("touchstart",t=>{const n=t;if(jt=!1,"default"===st.mode)if(1===n.touches.length){ht=new lt({type:st.painter,size:st.painterSize,color:st.color});const t=e.getRelativeCoord(n.touches[0].pageX,n.touches[0].pageY);ht.data.push(t.x,t.y)}else n.touches.length>1&&(it=n.touches[0].pageX,ut=n.touches[0].pageY,dt=n.touches[1].pageX,bt=n.touches[1].pageY)}),e.on("touchmove",t=>{const n=t;if(1===n.touches.length){if(ht){const t=e.getRelativeCoord(n.touches[0].pageX,n.touches[0].pageY);ht.data.push(t.x,t.y),jt||(jt=!0,e.layers.push(ht),st.his=[...e.layers],st.index++)}}else if(n.touches.length>1){const t=n.touches[0].pageX,c=n.touches[0].pageY,o=n.touches[1].pageX,a=n.touches[1].pageY,l=new i(dt-it,bt-ut),r=new i(o-t,a-c),s=l.angle(r.x,r.y),d=l.cross(r.x,r.y)>0?s:-s,u=r.norm()/l.norm(),b=e.getRelativeCoord((it+dt)/2,(ut+bt)/2);e.rotation+=d/Math.PI*180,e.scale*=u,b.rotate(e.rotation).scale(e.scale,e.scale);const h=new i((t+o)/2,(c+a)/2).move(-b.x,-b.y);e.x=h.x,e.y=h.y,it=t,dt=o,ut=c,bt=a}}),e.on("touchend",()=>{ht&&(ht=null,jt=!1)})};const pt={key:0},mt={class:"drawer-wrap"};var ft=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["ref"])(),n=Object(c["ref"])(),o=Object(c["ref"])(),a=Object(c["ref"])(!1),l=()=>{o.value=null},r=new d,s=Object(c["ref"])(!0);let i=null;const u=()=>{r.drawFrame(),i=window.requestAnimationFrame(u)};return Object(c["provide"])("openDrawer",e=>{o.value=Object(c["markRaw"])(e)}),Object(c["provide"])("closeDrawer",l),Object(c["provide"])("cvs",r),Object(c["provide"])("setting",st),Object(c["onMounted"])(()=>{r.mount(t.value),Ot(r),u()}),Object(c["onBeforeMount"])(()=>{i&&window.cancelAnimationFrame(i)}),Object(c["watch"])([et.value,s],()=>{Object(c["nextTick"])(()=>{n.value.scrollTop=9999999})}),(e,n)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",{ref_key:"cvsWrap",ref:t,class:"cvs-wrap"},null,512),Object(c["withDirectives"])(Object(c["createVNode"])(ge,null,null,512),[[c["vShow"],!a.value]]),Object(c["withDirectives"])(Object(c["createVNode"])(Ze,null,null,512),[[c["vShow"],!a.value]]),Object(c["createElementVNode"])("span",{class:Object(c["normalizeClass"])(["iconfont lockicon",a.value?"icon-lock":"icon-unlock-f"]),onClick:n[0]||(n[0]=e=>a.value=!a.value)},null,2),Object(c["createVNode"])(c["Transition"],{name:"drawer"},{default:Object(c["withCtx"])(()=>[o.value?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",pt,[Object(c["createElementVNode"])("div",{class:"modal",onClick:l}),Object(c["createElementVNode"])("div",mt,[Object(c["createElementVNode"])("span",{class:"closeicon iconfont icon-halfscreen",onClick:l}),(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["resolveDynamicComponent"])(o.value)))])])):Object(c["createCommentVNode"])("",!0)]),_:1})],64))}});n("1ef5"),n("db41");const vt=g()(ft,[["__scopeId","data-v-08977ed2"]]);t["default"]=vt},"7c11":function(e,t,n){"use strict";n("9825")},"7ede":function(e,t,n){},"84f0":function(e,t,n){},"874c":function(e,t,n){"use strict";n("7ede")},9825:function(e,t,n){},ac2d:function(e,t,n){"use strict";n("b056")},b056:function(e,t,n){},c209:function(e,t,n){},d07a:function(e,t,n){"use strict";n("84f0")},db41:function(e,t,n){"use strict";n("22fd")}}]);
//# sourceMappingURL=home.72a0a96d.js.map