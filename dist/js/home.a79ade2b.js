(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{"0a32":function(e,t,n){},"1fbd":function(e,t,n){"use strict";n("3a6d")},"264d":function(e,t,n){"use strict";n("568d")},"3a6d":function(e,t,n){},"42cb":function(e,t,n){"use strict";n("4a2a")},"495a":function(e,t,n){"use strict";n("0a32")},"4a2a":function(e,t,n){},"4eaf":function(e,t,n){},"568d":function(e,t,n){},"6cb2":function(e,t,n){},"7abe":function(e,t,n){"use strict";n.r(t);var c=n("7a23");const o=(e,t)=>{t.preventDefault(),e.emit("touchstart",t)},a=(e,t)=>{t.preventDefault(),e.emit("touchmove",t)},s=(e,t)=>{t.preventDefault(),e.emit("touchend",t)};function r(e){e.dom.addEventListener("touchstart",o.bind(e.dom,e)),e.dom.addEventListener("touchmove",a.bind(e.dom,e)),e.dom.addEventListener("touchend",s.bind(e.dom,e))}function l(e){e.dom.removeEventListener("touchstart",o.bind(e.dom,e)),e.dom.removeEventListener("touchmove",a.bind(e.dom,e)),e.dom.removeEventListener("touchend",s.bind(e.dom,e))}class i{constructor(e,t){this.x=e,this.y=t}matrix(e,t,n,c,o,a){const s=this.x,r=this.y;return this.x=e*s+t*r+n,this.y=c*s+o*r+a,this}translate(e,t){return this.x+=e,this.y+=t,this}move(e,t){return this.translate(e,t)}rotate(e){const t=Math.cos(e),n=Math.sin(e);return this.matrix(t,-n,0,n,t,0),this}scale(e,t){return this.x*=e,this.y*=t,this}skewX(e){e=e/180*Math.PI;const t=Math.tan(e);return this.matrix(1,t,0,0,1,0)}skewY(e){e=e/180*Math.PI;const t=Math.tan(e);return this.matrix(1,0,0,t,1,0)}norm(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalVector(){const e=this.norm();return 0===e?this:new i(this.y/e,-this.x/e)}unit(){const e=this.norm();return 0===e?this:new i(this.x/e,this.y/e)}angle(e=1,t=0){const n=this.norm(),c=Math.sqrt(e*e+t*t);if(n*c===0)return 0;const o=this.dot(e,t),a=Math.max(-1,Math.min(1,o/n/c));return Math.acos(a)}dot(e,t){return this.x*e+this.y*t}cross(e,t){return this.x*t-this.y*e}flip(e,t,n,c){const{x:o,y:a}=this,[s,r]=[o-e,a-t],[l,i]=[n-e,c-t];if(0!==l||0!==i){const n=l*l+i*i;this.x=(s*(l*l-i*i)+2*r*l*i)/n+e,this.y=(r*(i*i-l*l)+2*s*l*i)/n+t}return this}}class d{constructor(){this.x=0,this.y=0,this.scale=1,this.rotation=0,this.mode="default",this.backgroundColor="rgba(255, 255, 255, 0)",this.width=400,this.height=300,this.layers=[],this.handlers={},this.dom=this.initDom(),this.ctx=this.dom.getContext("2d"),r(this)}initDom(){const e=document.createElement("canvas");return e.width=this.width,e.height=this.height,Object.assign(e.style,{width:this.width+"px",height:this.height+"px",background:"#f0f0f0",verticalAlign:"middle"}),e}mount(e){e.appendChild(this.dom);const t=e.offsetWidth,n=e.offsetHeight;console.log(t,n),this.resize(t,n)}resize(e,t){this.width=e,this.height=t,this.dom.width=e,this.dom.height=t,this.dom.style.width=e+"px",this.dom.style.height=t+"px"}drawFrame(){const{x:e,y:t,scale:n,width:c,height:o,layers:a,ctx:s,backgroundColor:r,rotation:l}=this;s.clearRect(0,0,c,o),s.fillStyle=r,s.fillRect(0,0,c,o),s.save(),s.translate(e,t),s.scale(n,n),s.rotate(l),a.forEach(e=>{s.save(),e.draw(s),s.restore()}),s.restore()}getRelativeCoord(e,t){return new i(e,t).translate(-this.x,-this.y).scale(1/this.scale,1/this.scale).rotate(-this.rotation)}on(e,t){this.handlers[e]||(this.handlers[e]=[]);const n=this.handlers[e];n.push(t)}off(e,t){if(!this.handlers[e])return;if(!t)return void(this.handlers[e]=[]);const n=this.handlers[e],c=n.indexOf(t);c>-1&&n.splice(c,1)}emit(e,t){const n=this.handlers[e];n&&0!==n.length&&n.forEach(e=>e(t))}destroy(){l(this)}}const h={key:0,class:"tool-divider"},u=["onClick"];var b=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("setting"),n=[{name:"Pen",icon:"icon-pen1"},{name:"Eraser",icon:"icon-eraser"}],o=e=>{t.painter=e};return(e,a)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(n,(e,n)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:n},["divider"===e.name?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",h)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:1,class:Object(c["normalizeClass"])(["iconfont",e.name===Object(c["unref"])(t).painter?"is-active "+e.icon:e.icon]),onClick:t=>o(e.name)},null,10,u))],64))),64))}}),p=(n("e5c2"),n("6b0d")),j=n.n(p);const O=j()(b,[["__scopeId","data-v-f23fadc6"]]);var m=O;const f=e=>(Object(c["pushScopeId"])("data-v-858982ae"),e=e(),Object(c["popScopeId"])(),e),v={class:"panel"},g=f(()=>Object(c["createElementVNode"])("div",{class:"panel-header"}," 粗细 ",-1)),k={class:"panel-body"},x={class:"size-wrap flex"},w=["onClick"],C={class:"panel-body"};var y=Object(c["defineComponent"])({__name:"index",setup(e){const t=[1,5,10,15,20,25],n=Object(c["inject"])("setting");return(e,o)=>{const a=Object(c["resolveComponent"])("el-slider");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",v,[g,Object(c["createElementVNode"])("div",k,[Object(c["createElementVNode"])("div",x,[(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t,e=>Object(c["createElementVNode"])("span",{class:"size",key:e,onClick:t=>Object(c["unref"])(n).painterSize=e},[Object(c["createElementVNode"])("span",{class:"size-inner",style:Object(c["normalizeStyle"])({width:e+"px",height:e+"px"})},null,4)],8,w)),64))])]),Object(c["createElementVNode"])("div",C,[Object(c["createVNode"])(a,{modelValue:Object(c["unref"])(n).painterSize,"onUpdate:modelValue":o[0]||(o[0]=e=>Object(c["unref"])(n).painterSize=e),min:1,max:50},null,8,["modelValue"])])])}}});n("1fbd");const E=j()(y,[["__scopeId","data-v-858982ae"]]);var V=E;const N=e=>(Object(c["pushScopeId"])("data-v-92ac15c6"),e=e(),Object(c["popScopeId"])(),e),_=N(()=>Object(c["createElementVNode"])("span",{class:"sizeicon"},null,-1)),B=[_];var S=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("openDrawer");return(e,n)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{class:"iconfont",onClick:n[0]||(n[0]=e=>Object(c["unref"])(t)(V))},B))}});n("920e");const z=j()(S,[["__scopeId","data-v-92ac15c6"]]);var P=z;const U=e=>(Object(c["pushScopeId"])("data-v-29340ca2"),e=e(),Object(c["popScopeId"])(),e),I={class:"panel"},M=U(()=>Object(c["createElementVNode"])("div",{class:"panel-header"}," 最近使用 ",-1)),T={class:"panel-body"},D={class:"color-panel"},F=["onClick"],R={class:"panel"},L=U(()=>Object(c["createElementVNode"])("div",{class:"panel-header"}," 常用颜色 ",-1)),$={class:"panel-body"},X={class:"color-panel"},Y=["onClick"],J={class:"panel"},W=U(()=>Object(c["createElementVNode"])("div",{class:"panel-header"}," 全部颜色 ",-1)),q={class:"panel-body"};var A=Object(c["defineComponent"])({__name:"color",props:["color","colorUsed"],emits:["update:color","update:colorUsed"],setup(e,{emit:t}){const n=e,o=Object(c["ref"])(n.color),a=Object(c["ref"])(n.colorUsed),s=Object(c["inject"])("closeDrawer");let r=[];const l=e=>{const t=e.toString(16);return t.length<2?`${t}${t}`:t},i=64;for(let c=0;c<=255;c+=i)for(let e=0;e<=255;e+=i)for(let t=0;t<=255;t+=i)r.push(`#${l(c)}${l(e)}${l(t)}`);return Object(c["watch"])(o,e=>{if(a.value.includes(e)){const t=a.value.indexOf(e);a.value.splice(t,1)}else 10===a.value.length&&a.value.pop();a.value.unshift(e),t("update:color",e),t("update:colorUsed",a.value),s()}),(e,t)=>{const n=Object(c["resolveComponent"])("el-color-picker");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",I,[M,Object(c["createElementVNode"])("div",T,[Object(c["createElementVNode"])("div",D,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.value,e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:Object(c["normalizeClass"])(["color-grid",{"is-active":e===o.value}]),key:e,style:Object(c["normalizeStyle"])({backgroundColor:e}),onClick:t=>o.value=e},null,14,F))),128))])])]),Object(c["createElementVNode"])("div",R,[L,Object(c["createElementVNode"])("div",$,[Object(c["createElementVNode"])("div",X,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object(c["unref"])(r),e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:Object(c["normalizeClass"])(["color-grid",{"is-active":e===o.value}]),key:e,style:Object(c["normalizeStyle"])({backgroundColor:e}),onClick:t=>o.value=e},null,14,Y))),128))])])]),Object(c["createElementVNode"])("div",J,[W,Object(c["createElementVNode"])("div",q,[Object(c["createVNode"])(n,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),"show-alpha":""},null,8,["modelValue"])])])],64)}}});n("982f");const G=j()(A,[["__scopeId","data-v-29340ca2"]]);var H=G,K=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("setting");return(e,n)=>(Object(c["openBlock"])(),Object(c["createBlock"])(H,{color:Object(c["unref"])(t).color,"onUpdate:color":n[0]||(n[0]=e=>Object(c["unref"])(t).color=e),colorUsed:Object(c["unref"])(t).colorUsed,"onUpdate:colorUsed":n[1]||(n[1]=e=>Object(c["unref"])(t).colorUsed=e)},null,8,["color","colorUsed"]))}});const Q=K;var Z=Q,ee=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("openDrawer");return(e,n)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{class:"iconfont icon-color-filling",onClick:n[0]||(n[0]=e=>Object(c["unref"])(t)(Object(c["unref"])(Z)))}))}});const te=ee;var ne=te,ce=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("cvs"),n=Object(c["inject"])("setting"),o=()=>{n.index<0||(t.layers=n.his.slice(0,n.index),n.index--)};return(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{class:"iconfont icon-Undo",onClick:o}))}});const oe=ce;var ae=oe,se=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("cvs"),n=Object(c["inject"])("setting"),o=()=>{n.index!==n.his.length-1&&(n.index++,t.layers=n.his.slice(0,n.index+1))};return(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{class:"iconfont icon-Redo",onClick:o}))}});const re=se;var le=re;const ie=Object(c["createElementVNode"])("span",{class:"iconfont icon-delete"},null,-1),de=Object(c["createTextVNode"])(" 清除屏幕 "),he=[ie,de];var ue=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("cvs"),n=Object(c["inject"])("setting"),o=()=>{t.layers=[],n.his=[],n.index=-1};return(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{style:{color:"red"},onClick:o},he))}});const be=ue;var pe=be;const je=e=>(Object(c["pushScopeId"])("data-v-1de6035a"),e=e(),Object(c["popScopeId"])(),e),Oe=je(()=>Object(c["createElementVNode"])("div",null,"长按保存图片",-1)),me={class:"img-wrap"},fe=["src"];var ve=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("cvs"),n=t.dom.toDataURL();return(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Oe,Object(c["createElementVNode"])("div",me,[Object(c["createElementVNode"])("img",{src:Object(c["unref"])(n)},null,8,fe)])],64))}});n("264d");const ge=j()(ve,[["__scopeId","data-v-1de6035a"]]);var ke=ge;const xe=Object(c["createElementVNode"])("span",{class:"iconfont icon-download"},null,-1),we=Object(c["createTextVNode"])(" 导出图片 "),Ce=[xe,we];var ye=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("openDrawer");return(e,n)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{onClick:n[0]||(n[0]=e=>Object(c["unref"])(t)(ke))},Ce))}});const Ee=ye;var Ve=Ee,Ne=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("setting"),n=Object(c["inject"])("cvs");return(e,o)=>(Object(c["openBlock"])(),Object(c["createBlock"])(H,{color:Object(c["unref"])(n).backgroundColor,"onUpdate:color":o[0]||(o[0]=e=>Object(c["unref"])(n).backgroundColor=e),colorUsed:Object(c["unref"])(t).backgroundColorUsed,"onUpdate:colorUsed":o[1]||(o[1]=e=>Object(c["unref"])(t).backgroundColorUsed=e)},null,8,["color","colorUsed"]))}});const _e=Ne;var Be=_e;const Se=Object(c["createElementVNode"])("span",{class:"iconfont icon-background-f"},null,-1),ze=Object(c["createTextVNode"])(" 背景颜色 "),Pe=[Se,ze];var Ue=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("openDrawer");return(e,n)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{onClick:n[0]||(n[0]=e=>Object(c["unref"])(t)(Be))},Pe))}});const Ie=Ue;var Me=Ie;const Te=Object(c["createElementVNode"])("span",{class:"iconfont icon-marquee"},null,-1),De=Object(c["createTextVNode"])(" 重置视口 "),Fe=[Te,De];var Re=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["inject"])("cvs"),n=()=>{t.x=0,t.y=0,t.scale=1,t.rotation=0};return(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{onClick:n},Fe))}});const Le=Re;var $e=Le;const Xe=Object(c["createElementVNode"])("span",{class:"iconfont icon-menu"},null,-1);var Ye=Object(c["defineComponent"])({__name:"index",setup(e){return(e,t)=>{const n=Object(c["resolveComponent"])("el-dropdown-item"),o=Object(c["resolveComponent"])("el-dropdown-menu"),a=Object(c["resolveComponent"])("el-dropdown");return Object(c["openBlock"])(),Object(c["createBlock"])(a,{placement:"top"},{dropdown:Object(c["withCtx"])(()=>[Object(c["createVNode"])(o,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Me)]),_:1}),Object(c["createVNode"])(n,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])($e)]),_:1}),Object(c["createVNode"])(n,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Ve)]),_:1}),Object(c["createVNode"])(n,{divided:""},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(pe)]),_:1})]),_:1})]),default:Object(c["withCtx"])(()=>[Xe]),_:1})}}});const Je=Ye;var We=Je;const qe=e=>(Object(c["pushScopeId"])("data-v-1a18273b"),e=e(),Object(c["popScopeId"])(),e),Ae={class:"menu"},Ge=qe(()=>Object(c["createElementVNode"])("span",{class:"tool-divider"},null,-1));var He=Object(c["defineComponent"])({__name:"index",setup(e){return(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Ae,[Object(c["createVNode"])(m),Ge,Object(c["createVNode"])(ne),Object(c["createVNode"])(P),Object(c["createVNode"])(ae),Object(c["createVNode"])(le),Object(c["createVNode"])(We)]))}});n("8033"),n("495a");const Ke=j()(He,[["__scopeId","data-v-1a18273b"]]);var Qe=Ke;const Ze=Object(c["ref"])([]),et=Object(c["reactive"])({mode:"default",backgroundColor:"#f0f0f0",color:"#000",painter:"Pen",painterSize:1,his:[],index:-1,colorUsed:["#000000","#ff0000","#ffffff"],backgroundColorUsed:["#000000","#ff0000","#ffffff"]});var tt=et;let nt,ct,ot,at;var st=function(e){e.on("touchstart",e=>{const t=e;"default"===tt.mode&&2===t.touches.length&&(nt=t.touches[0].pageX,ot=t.touches[0].pageY,ct=t.touches[1].pageX,at=t.touches[1].pageY)}),e.on("touchmove",t=>{const n=t;if(2===n.touches.length){const t=n.touches[0].pageX,c=n.touches[0].pageY,o=n.touches[1].pageX,a=n.touches[1].pageY,s=new i(ct-nt,at-ot),r=new i(o-t,a-c),l=s.angle(r.x,r.y),d=s.cross(r.x,r.y)>0?l:-l,h=r.norm()/s.norm(),u=e.getRelativeCoord((nt+ct)/2,(ot+at)/2);e.rotation+=d,e.scale*=h,u.rotate(e.rotation).scale(e.scale,e.scale);const b=new i((t+o)/2,(c+a)/2).move(-u.x,-u.y);e.x=b.x,e.y=b.y,nt=t,ct=o,ot=c,at=a}})};class rt{}var lt=function(e,t,n){if(2===e.length)t.beginPath(),t.arc(e[0],e[1],n.size/2,0,2*Math.PI),t.closePath(),t.fillStyle=n.color,t.fill();else{t.beginPath(),t.moveTo(e[0],e[1]);for(let n=2;n<e.length;n+=2)t.lineTo(e[n],e[n+1]);t.strokeStyle=n.color,t.lineWidth=n.size,t.lineCap="round",t.lineJoin="round",t.stroke(),t.closePath()}},it=function(e,t,n){if(!(e.length<4)){t.beginPath(),t.moveTo(e[0],e[1]);for(let n=2;n<e.length;n+=2)t.lineTo(e[n],e[n+1]);t.strokeStyle=n.color,t.lineWidth=n.size,t.lineCap="round",t.lineJoin="round",t.stroke(),t.closePath()}},dt=function(e,t,n){if(!(e.length<4)){t.beginPath(),t.moveTo(e[0],e[1]);for(let n=2;n<e.length;n+=2)t.lineTo(e[n],e[n+1]);t.strokeStyle=n.color,t.lineWidth=n.size,t.lineCap="butt",t.lineJoin="round",t.stroke(),t.closePath()}},ht=function(e,t,n){if(!(e.length<4)){t.globalCompositeOperation="destination-out",t.beginPath(),t.moveTo(e[0],e[1]);for(let n=2;n<e.length;n+=2)t.lineTo(e[n],e[n+1]);t.strokeStyle=n.color,t.lineWidth=n.size,t.lineCap="round",t.lineJoin="round",t.stroke(),t.closePath()}},ut=function(e,t,n){if(e.length<4)return;t.fillStyle=n.color,t.strokeStyle=n.color;const c=n.scale,o=n.size;let a=o/8;for(let s=0;s<e.length-2;s+=2){let n=e[s],r=e[s+1];const l=e[s+2],d=e[s+3],h=new i(l-n,d-r).norm()/c;if(h<=1)t.beginPath(),t.moveTo(n,r),t.lineTo(l,d),t.stroke(),t.closePath();else{const e=Math.min(5*o/h,o/2,1.3*a),c=(e-a)/h,s=(l-n)/h,i=(d-r)/h;for(let o=0;o<h;o+=1)a>0&&(t.beginPath(),t.arc(n,r,a,0,2*Math.PI),t.closePath(),t.fill()),n+=s,r+=i,a+=c}}},bt=function(e,t,n){switch(n.type){case"MarkPen":return dt(e,t,n);case"Pencil":return it(e,t,n);case"Eraser":return ht(e,t,n);case"SoftPen":return ut(e,t,n);default:return lt(e,t,n)}};class pt extends rt{constructor(e){super(),this.type="Path",this.data=[],this.painter=e}draw(e){bt(this.data,e,this.painter)}}let jt=null,Ot=!1;const mt=45;var ft=function(e){e.on("touchstart",t=>{const n=t;if("default"===tt.mode&&1===n.touches.length){const t={type:tt.painter,size:tt.painterSize,color:tt.color},c=e.getRelativeCoord(n.touches[0].pageX,n.touches[0].pageY-mt);jt=new pt(t),jt.data.push(c.x,c.y)}}),e.on("touchmove",t=>{const n=t;if(1===n.touches.length&&jt){const t=e.getRelativeCoord(n.touches[0].pageX,n.touches[0].pageY-mt);jt.data.push(t.x,t.y),Ot||(Ot=!0,e.layers.push(jt),tt.his=[...e.layers],tt.index++)}}),e.on("touchend",()=>{Ot=!1,jt&&(jt=null)})};function vt(e,t,n,c=80){const o=(e,t,n)=>{let c=0;for(let o=0;o<4;o++)if(c+=Math.abs(e[o]-t[o]),c>n)return!1;return!0},a=e.data,s=e.width,r=e.height,l=new Set,i=[[t,n]],d=4*(n*s+t),h=[a[d],a[d+1],a[d+2],a[d+3]],u=(e,t)=>{if(l.has(`${e},${t}`))return;l.add(`${e},${t}`);const n=4*(t*s+e);o(h,[a[n],a[n+1],a[n+2],a[n+3]],c)&&i.push([e,t])};let b=0;while(b<i.length){const[e,t]=i[b];t>0&&u(e,t-1),e>0&&u(e-1,t),e<s-1&&u(e+1,t),t<r-1&&u(e,t+1),b++}return i}class gt extends rt{constructor(e,t,n,c,o,a){super(),this.type="Rasterized",this.x=0,this.y=0,this.width=100,this.height=100,this.rotation=0,this.img=e,this.x=t,this.y=n,this.width=c,this.height=o,this.rotation=a}draw(e){e.translate(this.x,this.y),e.rotate(this.rotation),e.drawImage(this.img,0,0,this.width,this.height)}}let kt,xt,wt=!1,Ct=!1;const yt=45;var Et=function(e){e.on("touchstart",e=>{const t=e;1===t.touches.length&&(wt=!1,Ct=!0,kt=Math.floor(t.touches[0].pageX),xt=Math.floor(t.touches[0].pageY-yt))}),e.on("touchmove",()=>{wt=!0}),e.on("touchend",()=>{if(!wt&&Ct){const t=e.ctx.getImageData(0,0,e.width,e.height),n=vt(t,kt,xt,50);let c=n[0][0],o=c,a=n[0][1],s=a;n.forEach(([e,t])=>{(void 0===c||e<c)&&(c=e),(void 0===a||t<a)&&(a=t),(void 0===o||e>o)&&(o=e),(void 0===s||t>s)&&(s=t)});const r=document.createElement("canvas");r.width=o-c+1,r.height=s-a+1;const l=r.getContext("2d");l.fillStyle=tt.color,n.forEach(([e,t])=>l.fillRect(e-c,t-a,1,1));const i=e.getRelativeCoord(c,a),d=Math.round((o-c)/e.scale),h=Math.round((s-a)/e.scale),u=new gt(r,i.x,i.y,d,h,-e.rotation);e.layers.push(u),tt.his=[...e.layers],tt.index++}wt=!1,Ct=!1})},Vt=function(e){ft(e),st(e),Et(e)};const Nt={class:"page-wrap flex-v"},_t={key:0},Bt={class:"drawer-wrap"};var St=Object(c["defineComponent"])({__name:"index",setup(e){const t=Object(c["ref"])(),n=Object(c["ref"])(),o=Object(c["ref"])(),a=()=>{o.value=null},s=new d,r=Object(c["ref"])(!0);let l=null;const i=()=>{s.drawFrame(),l=window.requestAnimationFrame(i)};return Object(c["provide"])("openDrawer",e=>{o.value=Object(c["markRaw"])(e)}),Object(c["provide"])("closeDrawer",a),Object(c["provide"])("cvs",s),Object(c["provide"])("setting",tt),Object(c["onMounted"])(()=>{s.mount(t.value),Vt(s),i()}),Object(c["onBeforeMount"])(()=>{l&&window.cancelAnimationFrame(l)}),Object(c["watch"])([Ze.value,r],()=>{Object(c["nextTick"])(()=>{n.value.scrollTop=9999999})}),(e,n)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",Nt,[Object(c["createVNode"])(Qe,{class:"flex-item",onGesturestart:n[0]||(n[0]=Object(c["withModifiers"])(()=>{},["prevent"]))}),Object(c["createElementVNode"])("div",{ref_key:"cvsWrap",ref:t,class:"flex-main"},null,512)]),Object(c["createVNode"])(c["Transition"],{name:"drawer"},{default:Object(c["withCtx"])(()=>[o.value?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",_t,[Object(c["createElementVNode"])("div",{class:"modal",onClick:a}),Object(c["createElementVNode"])("div",Bt,[Object(c["createElementVNode"])("span",{class:"closeicon iconfont icon-halfscreen",onClick:a}),(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["resolveDynamicComponent"])(o.value)))])])):Object(c["createCommentVNode"])("",!0)]),_:1})],64))}});n("baa9"),n("42cb");const zt=j()(St,[["__scopeId","data-v-5c575d3a"]]);t["default"]=zt},8033:function(e,t,n){"use strict";n("ce14")},"920e":function(e,t,n){"use strict";n("fda6")},"982f":function(e,t,n){"use strict";n("4eaf")},baa9:function(e,t,n){"use strict";n("f34e")},ce14:function(e,t,n){},e5c2:function(e,t,n){"use strict";n("6cb2")},f34e:function(e,t,n){},fda6:function(e,t,n){}}]);
//# sourceMappingURL=home.a79ade2b.js.map