(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{"0873":function(e,t,n){},"15a9":function(e,t,n){},"1fbd":function(e,t,n){"use strict";n("3a6d")},2517:function(e,t,n){},"264d":function(e,t,n){"use strict";n("568d")},"2c5f":function(e,t,n){"use strict";n("3174")},3174:function(e,t,n){},"39bf":function(e,t,n){},"3a6d":function(e,t,n){},"440a":function(e,t,n){},"4bbd":function(e,t,n){},"4c7b":function(e,t,n){"use strict";n("2517")},"4cb7":function(e,t,n){},"4eaf":function(e,t,n){},"568d":function(e,t,n){},5797:function(e,t,n){"use strict";n("0873")},"71e3":function(e,t,n){"use strict";n("4bbd")},"7abe":function(e,t,n){"use strict";n.r(t);var o=n("7a23");const c=(e,t)=>{t.preventDefault(),e.emit("touchstart",t)},a=(e,t)=>{t.preventDefault(),e.emit("touchmove",t)},s=(e,t)=>{t.preventDefault(),e.emit("touchend",t)};function r(e){e.dom.addEventListener("touchstart",c.bind(e.dom,e)),e.dom.addEventListener("touchmove",a.bind(e.dom,e)),e.dom.addEventListener("touchend",s.bind(e.dom,e))}function i(e){e.dom.removeEventListener("touchstart",c.bind(e.dom,e)),e.dom.removeEventListener("touchmove",a.bind(e.dom,e)),e.dom.removeEventListener("touchend",s.bind(e.dom,e))}class l{constructor(e,t){this.x=e,this.y=t}matrix(e,t,n,o,c,a){const s=this.x,r=this.y;return this.x=e*s+t*r+n,this.y=o*s+c*r+a,this}translate(e,t){return this.x+=e,this.y+=t,this}move(e,t){return this.translate(e,t)}rotate(e){const t=Math.cos(e),n=Math.sin(e);return this.matrix(t,-n,0,n,t,0),this}scale(e,t){return this.x*=e,this.y*=t,this}skewX(e){e=e/180*Math.PI;const t=Math.tan(e);return this.matrix(1,t,0,0,1,0)}skewY(e){e=e/180*Math.PI;const t=Math.tan(e);return this.matrix(1,0,0,t,1,0)}norm(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalVector(){const e=this.norm();return 0===e?this:new l(this.y/e,-this.x/e)}unit(){const e=this.norm();return 0===e?this:new l(this.x/e,this.y/e)}angle(e=1,t=0){const n=this.norm(),o=Math.sqrt(e*e+t*t);if(n*o===0)return 0;const c=this.dot(e,t),a=Math.max(-1,Math.min(1,c/n/o));return Math.acos(a)}dot(e,t){return this.x*e+this.y*t}cross(e,t){return this.x*t-this.y*e}flip(e,t,n,o){const{x:c,y:a}=this,[s,r]=[c-e,a-t],[i,l]=[n-e,o-t];if(0!==i||0!==l){const n=i*i+l*l;this.x=(s*(i*i-l*l)+2*r*i*l)/n+e,this.y=(r*(l*l-i*i)+2*s*i*l)/n+t}return this}}class d{constructor(){this.x=0,this.y=0,this.scale=1,this.rotation=0,this.mode="default",this.backgroundColor="rgba(255, 255, 255, 0)",this.width=400,this.height=300,this.layers=[],this.handlers={},this.dom=this.initDom(),this.ctx=this.dom.getContext("2d"),r(this)}initDom(){const e=document.createElement("canvas");return e.width=this.width,e.height=this.height,Object.assign(e.style,{width:this.width+"px",height:this.height+"px",background:"#f0f0f0",verticalAlign:"middle"}),e}mount(e){e.appendChild(this.dom);const t=e.offsetWidth,n=e.offsetHeight;this.resize(t,n)}resize(e,t){this.width=e,this.height=t,this.dom.width=e,this.dom.height=t,this.dom.style.width=e+"px",this.dom.style.height=t+"px"}drawFrame(){const{x:e,y:t,scale:n,width:o,height:c,layers:a,ctx:s,backgroundColor:r,rotation:i}=this;s.clearRect(0,0,o,c),s.fillStyle=r,s.fillRect(0,0,o,c),s.save(),s.translate(e,t),s.scale(n,n),s.rotate(i),a.forEach(e=>{s.save(),e.draw(s),s.restore()}),s.restore()}getRelativeCoord(e,t){return new l(e,t).translate(-this.x,-this.y).scale(1/this.scale,1/this.scale).rotate(-this.rotation)}on(e,t){this.handlers[e]||(this.handlers[e]=[]);const n=this.handlers[e];n.push(t)}off(e,t){if(!this.handlers[e])return;if(!t)return void(this.handlers[e]=[]);const n=this.handlers[e],o=n.indexOf(t);o>-1&&n.splice(o,1)}emit(e,t){const n=this.handlers[e];n&&0!==n.length&&n.forEach(e=>e(t))}destroy(){i(this)}}const u={key:0,class:"tool-divider"},h=["onClick"];var b=Object(o["defineComponent"])({__name:"index",setup(e){const t=Object(o["inject"])("setting"),n=[{name:"Pen",icon:"icon-pen1"},{name:"Eraser",icon:"icon-eraser"}],c=e=>{t.painter=e};return(e,a)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(n,(e,n)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:n},["divider"===e.name?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",u)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:1,class:Object(o["normalizeClass"])(["iconfont penicon",e.name===Object(o["unref"])(t).painter?"is-active "+e.icon:e.icon]),onClick:t=>c(e.name)},null,10,h))],64))),64))}}),p=(n("5797"),n("6b0d")),j=n.n(p);const m=j()(b,[["__scopeId","data-v-38cb169a"]]);var O=m;const f=e=>(Object(o["pushScopeId"])("data-v-858982ae"),e=e(),Object(o["popScopeId"])(),e),v={class:"panel"},g=f(()=>Object(o["createElementVNode"])("div",{class:"panel-header"}," 粗细 ",-1)),k={class:"panel-body"},x={class:"size-wrap flex"},w=["onClick"],C={class:"panel-body"};var y=Object(o["defineComponent"])({__name:"index",setup(e){const t=[1,5,10,15,20,25],n=Object(o["inject"])("setting");return(e,c)=>{const a=Object(o["resolveComponent"])("el-slider");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",v,[g,Object(o["createElementVNode"])("div",k,[Object(o["createElementVNode"])("div",x,[(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(t,e=>Object(o["createElementVNode"])("span",{class:"size",key:e,onClick:t=>Object(o["unref"])(n).painterSize=e},[Object(o["createElementVNode"])("span",{class:"size-inner",style:Object(o["normalizeStyle"])({width:e+"px",height:e+"px"})},null,4)],8,w)),64))])]),Object(o["createElementVNode"])("div",C,[Object(o["createVNode"])(a,{modelValue:Object(o["unref"])(n).painterSize,"onUpdate:modelValue":c[0]||(c[0]=e=>Object(o["unref"])(n).painterSize=e),min:1,max:50},null,8,["modelValue"])])])}}});n("1fbd");const E=j()(y,[["__scopeId","data-v-858982ae"]]);var V=E;const _=e=>(Object(o["pushScopeId"])("data-v-6941fa26"),e=e(),Object(o["popScopeId"])(),e),B=_(()=>Object(o["createElementVNode"])("span",{class:"sizeicon"},null,-1)),N=[B];var S=Object(o["defineComponent"])({__name:"index",setup(e){const t=Object(o["inject"])("openDrawer");return(e,n)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{class:"iconfont",onClick:n[0]||(n[0]=e=>Object(o["unref"])(t)(V))},N))}});n("f440");const M=j()(S,[["__scopeId","data-v-6941fa26"]]);var z=M;const I=e=>(Object(o["pushScopeId"])("data-v-29340ca2"),e=e(),Object(o["popScopeId"])(),e),P={class:"panel"},U=I(()=>Object(o["createElementVNode"])("div",{class:"panel-header"}," 最近使用 ",-1)),T={class:"panel-body"},D={class:"color-panel"},R=["onClick"],F={class:"panel"},L=I(()=>Object(o["createElementVNode"])("div",{class:"panel-header"}," 常用颜色 ",-1)),$={class:"panel-body"},X={class:"color-panel"},Y=["onClick"],J={class:"panel"},W=I(()=>Object(o["createElementVNode"])("div",{class:"panel-header"}," 全部颜色 ",-1)),q={class:"panel-body"};var A=Object(o["defineComponent"])({__name:"color",props:["color","colorUsed"],emits:["update:color","update:colorUsed"],setup(e,{emit:t}){const n=e,c=Object(o["ref"])(n.color),a=Object(o["ref"])(n.colorUsed),s=Object(o["inject"])("closeDrawer");let r=[];const i=e=>{const t=e.toString(16);return t.length<2?`${t}${t}`:t},l=64;for(let o=0;o<=255;o+=l)for(let e=0;e<=255;e+=l)for(let t=0;t<=255;t+=l)r.push(`#${i(o)}${i(e)}${i(t)}`);return Object(o["watch"])(c,e=>{if(a.value.includes(e)){const t=a.value.indexOf(e);a.value.splice(t,1)}else 10===a.value.length&&a.value.pop();a.value.unshift(e),t("update:color",e),t("update:colorUsed",a.value),s()}),(e,t)=>{const n=Object(o["resolveComponent"])("el-color-picker");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("div",P,[U,Object(o["createElementVNode"])("div",T,[Object(o["createElementVNode"])("div",D,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.value,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])(["color-grid",{"is-active":e===c.value}]),key:e,style:Object(o["normalizeStyle"])({backgroundColor:e}),onClick:t=>c.value=e},null,14,R))),128))])])]),Object(o["createElementVNode"])("div",F,[L,Object(o["createElementVNode"])("div",$,[Object(o["createElementVNode"])("div",X,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Object(o["unref"])(r),e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])(["color-grid",{"is-active":e===c.value}]),key:e,style:Object(o["normalizeStyle"])({backgroundColor:e}),onClick:t=>c.value=e},null,14,Y))),128))])])]),Object(o["createElementVNode"])("div",J,[W,Object(o["createElementVNode"])("div",q,[Object(o["createVNode"])(n,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),"show-alpha":""},null,8,["modelValue"])])])],64)}}});n("982f");const G=j()(A,[["__scopeId","data-v-29340ca2"]]);var H=G,K=Object(o["defineComponent"])({__name:"index",setup(e){const t=Object(o["inject"])("setting");return(e,n)=>(Object(o["openBlock"])(),Object(o["createBlock"])(H,{color:Object(o["unref"])(t).color,"onUpdate:color":n[0]||(n[0]=e=>Object(o["unref"])(t).color=e),colorUsed:Object(o["unref"])(t).colorUsed,"onUpdate:colorUsed":n[1]||(n[1]=e=>Object(o["unref"])(t).colorUsed=e)},null,8,["color","colorUsed"]))}});const Q=K;var Z=Q,ee=Object(o["defineComponent"])({__name:"index",setup(e){const t=Object(o["inject"])("openDrawer");return(e,n)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{class:"iconfont icon-color-filling",onClick:n[0]||(n[0]=e=>Object(o["unref"])(t)(Object(o["unref"])(Z)))}))}});const te=ee;var ne=te;const oe=e=>(Object(o["pushScopeId"])("data-v-0cb1b976"),e=e(),Object(o["popScopeId"])(),e),ce={class:"menu-bottom menu"},ae=oe(()=>Object(o["createElementVNode"])("span",{class:"tool-divider"},null,-1));var se=Object(o["defineComponent"])({__name:"BottomMenu",setup(e){return(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ce,[Object(o["createVNode"])(O),ae,Object(o["createVNode"])(ne),Object(o["createVNode"])(z)]))}});n("2c5f"),n("d24a");const re=j()(se,[["__scopeId","data-v-0cb1b976"]]);var ie=re,le=Object(o["defineComponent"])({__name:"index",setup(e){const t=Object(o["inject"])("cvs"),n=Object(o["inject"])("setting"),c=()=>{n.index<0||(t.layers=n.his.slice(0,n.index),n.index--)};return(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{class:"iconfont icon-Undo",onClick:c}))}});const de=le;var ue=de,he=Object(o["defineComponent"])({__name:"index",setup(e){const t=Object(o["inject"])("cvs"),n=Object(o["inject"])("setting"),c=()=>{n.index!==n.his.length-1&&(n.index++,t.layers=n.his.slice(0,n.index+1))};return(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{class:"iconfont icon-Redo",onClick:c}))}});const be=he;var pe=be;const je=Object(o["createElementVNode"])("span",{class:"iconfont icon-delete"},null,-1),me=Object(o["createTextVNode"])(" 清除屏幕 "),Oe=[je,me];var fe=Object(o["defineComponent"])({__name:"index",setup(e){const t=Object(o["inject"])("cvs"),n=Object(o["inject"])("setting"),c=()=>{t.layers=[],n.his=[],n.index=-1};return(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{style:{color:"red"},onClick:c},Oe))}});const ve=fe;var ge=ve;const ke=e=>(Object(o["pushScopeId"])("data-v-1de6035a"),e=e(),Object(o["popScopeId"])(),e),xe=ke(()=>Object(o["createElementVNode"])("div",null,"长按保存图片",-1)),we={class:"img-wrap"},Ce=["src"];var ye=Object(o["defineComponent"])({__name:"index",setup(e){const t=Object(o["inject"])("cvs"),n=t.dom.toDataURL();return(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[xe,Object(o["createElementVNode"])("div",we,[Object(o["createElementVNode"])("img",{src:Object(o["unref"])(n)},null,8,Ce)])],64))}});n("264d");const Ee=j()(ye,[["__scopeId","data-v-1de6035a"]]);var Ve=Ee;const _e=Object(o["createElementVNode"])("span",{class:"iconfont icon-download"},null,-1),Be=Object(o["createTextVNode"])(" 导出图片 "),Ne=[_e,Be];var Se=Object(o["defineComponent"])({__name:"index",setup(e){const t=Object(o["inject"])("openDrawer");return(e,n)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{onClick:n[0]||(n[0]=e=>Object(o["unref"])(t)(Ve))},Ne))}});const Me=Se;var ze=Me,Ie=Object(o["defineComponent"])({__name:"index",setup(e){const t=Object(o["inject"])("setting"),n=Object(o["inject"])("cvs");return(e,c)=>(Object(o["openBlock"])(),Object(o["createBlock"])(H,{color:Object(o["unref"])(n).backgroundColor,"onUpdate:color":c[0]||(c[0]=e=>Object(o["unref"])(n).backgroundColor=e),colorUsed:Object(o["unref"])(t).backgroundColorUsed,"onUpdate:colorUsed":c[1]||(c[1]=e=>Object(o["unref"])(t).backgroundColorUsed=e)},null,8,["color","colorUsed"]))}});const Pe=Ie;var Ue=Pe;const Te=Object(o["createElementVNode"])("span",{class:"iconfont icon-background-f"},null,-1),De=Object(o["createTextVNode"])(" 背景颜色 "),Re=[Te,De];var Fe=Object(o["defineComponent"])({__name:"index",setup(e){const t=Object(o["inject"])("openDrawer");return(e,n)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{onClick:n[0]||(n[0]=e=>Object(o["unref"])(t)(Ue))},Re))}});const Le=Fe;var $e=Le;const Xe=Object(o["createElementVNode"])("span",{class:"iconfont icon-marquee"},null,-1),Ye=Object(o["createTextVNode"])(" 重置视口 "),Je=[Xe,Ye];var We=Object(o["defineComponent"])({__name:"index",setup(e){const t=Object(o["inject"])("cvs"),n=()=>{t.x=0,t.y=0,t.scale=1,t.rotation=0};return(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{onClick:n},Je))}});const qe=We;var Ae=qe;const Ge=Object(o["createElementVNode"])("span",{class:"iconfont icon-menu"},null,-1);var He=Object(o["defineComponent"])({__name:"index",setup(e){return(e,t)=>{const n=Object(o["resolveComponent"])("el-dropdown-item"),c=Object(o["resolveComponent"])("el-dropdown-menu"),a=Object(o["resolveComponent"])("el-dropdown");return Object(o["openBlock"])(),Object(o["createBlock"])(a,{placement:"left"},{dropdown:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(n,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])($e)]),_:1}),Object(o["createVNode"])(n,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(Ae)]),_:1}),Object(o["createVNode"])(n,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(ze)]),_:1}),Object(o["createVNode"])(n,{divided:""},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(ge)]),_:1})]),_:1})]),default:Object(o["withCtx"])(()=>[Ge]),_:1})}}});const Ke=He;var Qe=Ke;const Ze={class:"menu-right menu"};var et=Object(o["defineComponent"])({__name:"RightMenu",setup(e){return(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ze,[Object(o["createVNode"])(ue),Object(o["createVNode"])(pe),Object(o["createVNode"])(Qe)]))}});n("9e1c"),n("71e3");const tt=j()(et,[["__scopeId","data-v-5f2d72e6"]]);var nt=tt;const ot=Object(o["ref"])([]),ct=Object(o["reactive"])({mode:"default",backgroundColor:"#f0f0f0",color:"#000",painter:"Pen",painterSize:10,his:[],index:-1,colorUsed:["#000000","#ff0000","#ffffff"],backgroundColorUsed:["#000000","#ff0000","#ffffff"]});var at=ct;let st,rt,it,lt;var dt=function(e){e.on("touchstart",e=>{const t=e;"default"===at.mode&&2===t.touches.length&&(st=t.touches[0].pageX,it=t.touches[0].pageY,rt=t.touches[1].pageX,lt=t.touches[1].pageY)}),e.on("touchmove",t=>{const n=t;if(2===n.touches.length){const t=n.touches[0].pageX,o=n.touches[0].pageY,c=n.touches[1].pageX,a=n.touches[1].pageY,s=new l(rt-st,lt-it),r=new l(c-t,a-o),i=s.angle(r.x,r.y),d=s.cross(r.x,r.y)>0?i:-i,u=r.norm()/s.norm(),h=e.getRelativeCoord((st+rt)/2,(it+lt)/2);e.rotation+=d,e.scale*=u,h.rotate(e.rotation).scale(e.scale,e.scale);const b=new l((t+c)/2,(o+a)/2).move(-h.x,-h.y);e.x=b.x,e.y=b.y,st=t,rt=c,it=o,lt=a}})};class ut{}var ht=function(e,t,n){if(2===e.length)t.beginPath(),t.arc(e[0],e[1],n.size/2,0,2*Math.PI),t.closePath(),t.fillStyle=n.color,t.fill();else{t.beginPath(),t.moveTo(e[0],e[1]);for(let n=2;n<e.length;n+=2)t.lineTo(e[n],e[n+1]);t.strokeStyle=n.color,t.lineWidth=n.size,t.lineCap="round",t.lineJoin="round",t.stroke(),t.closePath()}},bt=function(e,t,n){if(!(e.length<4)){t.beginPath(),t.moveTo(e[0],e[1]);for(let n=2;n<e.length;n+=2)t.lineTo(e[n],e[n+1]);t.strokeStyle=n.color,t.lineWidth=n.size,t.lineCap="round",t.lineJoin="round",t.stroke(),t.closePath()}},pt=function(e,t,n){if(!(e.length<4)){t.beginPath(),t.moveTo(e[0],e[1]);for(let n=2;n<e.length;n+=2)t.lineTo(e[n],e[n+1]);t.strokeStyle=n.color,t.lineWidth=n.size,t.lineCap="butt",t.lineJoin="round",t.stroke(),t.closePath()}},jt=function(e,t,n){if(!(e.length<4)){t.globalCompositeOperation="destination-out",t.beginPath(),t.moveTo(e[0],e[1]);for(let n=2;n<e.length;n+=2)t.lineTo(e[n],e[n+1]);t.strokeStyle=n.color,t.lineWidth=n.size,t.lineCap="round",t.lineJoin="round",t.stroke(),t.closePath()}},mt=function(e,t,n){if(e.length<4)return;t.fillStyle=n.color,t.strokeStyle=n.color;const o=n.scale,c=n.size;let a=c/8;for(let s=0;s<e.length-2;s+=2){let n=e[s],r=e[s+1];const i=e[s+2],d=e[s+3],u=new l(i-n,d-r).norm()/o;if(u<=1)t.beginPath(),t.moveTo(n,r),t.lineTo(i,d),t.stroke(),t.closePath();else{const e=Math.min(5*c/u,c/2,1.3*a),o=(e-a)/u,s=(i-n)/u,l=(d-r)/u;for(let c=0;c<u;c+=1)a>0&&(t.beginPath(),t.arc(n,r,a,0,2*Math.PI),t.closePath(),t.fill()),n+=s,r+=l,a+=o}}},Ot=function(e,t,n){switch(n.type){case"MarkPen":return pt(e,t,n);case"Pencil":return bt(e,t,n);case"Eraser":return jt(e,t,n);case"SoftPen":return mt(e,t,n);default:return ht(e,t,n)}};class ft extends ut{constructor(e){super(),this.type="Path",this.data=[],this.painter=e}draw(e){Ot(this.data,e,this.painter)}}let vt=null;var gt=function(e){e.on("touchstart",t=>{const n=t;if("default"===at.mode&&1===n.touches.length){const t={type:at.painter,size:at.painterSize,color:at.color},o=e.getRelativeCoord(n.touches[0].pageX,n.touches[0].pageY);vt=new ft(t),vt.data.push(o.x,o.y),e.layers.push(vt),at.his=[...e.layers],at.index++}}),e.on("touchmove",t=>{const n=t;if(1===n.touches.length&&vt){const t=e.getRelativeCoord(n.touches[0].pageX,n.touches[0].pageY);vt.data.push(t.x,t.y)}}),e.on("touchend",()=>{vt&&(vt=null)})};function kt(e,t,n,o=80){const c=(e,t,n)=>{let o=0;for(let c=0;c<4;c++)if(o+=Math.abs(e[c]-t[c]),o>n)return!1;return!0},a=e.data,s=e.width,r=e.height,i=new Set,l=[[t,n]],d=4*(n*s+t),u=[a[d],a[d+1],a[d+2],a[d+3]],h=(e,t)=>{if(i.has(`${e},${t}`))return;i.add(`${e},${t}`);const n=4*(t*s+e);c(u,[a[n],a[n+1],a[n+2],a[n+3]],o)&&l.push([e,t])};let b=0;while(b<l.length){const[e,t]=l[b];t>0&&h(e,t-1),e>0&&h(e-1,t),e<s-1&&h(e+1,t),t<r-1&&h(e,t+1),b++}return l}class xt extends ut{constructor(e,t,n,o,c,a){super(),this.type="Rasterized",this.x=0,this.y=0,this.width=100,this.height=100,this.rotation=0,this.img=e,this.x=t,this.y=n,this.width=o,this.height=c,this.rotation=a}draw(e){e.translate(this.x,this.y),e.rotate(this.rotation),e.drawImage(this.img,0,0,this.width,this.height)}}let wt,Ct,yt=!1,Et=!1;var Vt=function(e){e.on("touchstart",e=>{const t=e;2===t.touches.length&&(yt=!1,Et=!0,wt=Math.floor(t.touches[0].pageX),Ct=Math.floor(t.touches[0].pageY))}),e.on("touchmove",()=>{yt=!0}),e.on("touchend",()=>{if(!yt&&Et){const t=e.ctx.getImageData(0,0,e.width,e.height),n=kt(t,wt,Ct);let o=n[0][0],c=o,a=n[0][1],s=a;n.forEach(([e,t])=>{(void 0===o||e<o)&&(o=e),(void 0===a||t<a)&&(a=t),(void 0===c||e>c)&&(c=e),(void 0===s||t>s)&&(s=t)});const r=document.createElement("canvas");r.width=c-o+1,r.height=s-a+1;const i=r.getContext("2d");i.fillStyle=at.color,n.forEach(([e,t])=>i.fillRect(e-o,t-a,1,1));const l=e.getRelativeCoord(o,a),d=Math.round((c-o)/e.scale),u=Math.round((s-a)/e.scale),h=new xt(r,l.x,l.y,d,u,-e.rotation);e.layers.push(h),at.his=[...e.layers],at.index++}yt=!1,Et=!1})},_t=function(e){gt(e),dt(e),Vt(e)};const Bt={key:0},Nt={class:"drawer-wrap"};var St=Object(o["defineComponent"])({__name:"index",setup(e){const t=Object(o["ref"])(),n=Object(o["ref"])(),c=Object(o["ref"])(),a=()=>{c.value=null},s=new d,r=Object(o["ref"])(!0);let i=null;const l=()=>{s.drawFrame(),i=window.requestAnimationFrame(l)};return Object(o["provide"])("openDrawer",e=>{c.value=Object(o["markRaw"])(e)}),Object(o["provide"])("closeDrawer",a),Object(o["provide"])("cvs",s),Object(o["provide"])("setting",at),Object(o["onMounted"])(()=>{s.mount(t.value),_t(s),l()}),Object(o["onBeforeMount"])(()=>{i&&window.cancelAnimationFrame(i)}),Object(o["watch"])([ot.value,r],()=>{Object(o["nextTick"])(()=>{n.value.scrollTop=9999999})}),(e,n)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("div",{ref_key:"cvsWrap",ref:t,class:"cvs-wrap"},null,512),Object(o["createVNode"])(ie,{onGesturestart:n[0]||(n[0]=Object(o["withModifiers"])(()=>{},["prevent"]))}),Object(o["createVNode"])(nt,{onGesturestart:n[1]||(n[1]=Object(o["withModifiers"])(()=>{},["prevent"]))}),Object(o["createVNode"])(o["Transition"],{name:"drawer"},{default:Object(o["withCtx"])(()=>[c.value?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Bt,[Object(o["createElementVNode"])("div",{class:"modal",onClick:a}),Object(o["createElementVNode"])("div",Nt,[Object(o["createElementVNode"])("span",{class:"closeicon iconfont icon-halfscreen",onClick:a}),(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(c.value)))])])):Object(o["createCommentVNode"])("",!0)]),_:1})],64))}});n("9a50"),n("4c7b");const Mt=j()(St,[["__scopeId","data-v-387bca66"]]);t["default"]=Mt},"982f":function(e,t,n){"use strict";n("4eaf")},"9a50":function(e,t,n){"use strict";n("15a9")},"9e1c":function(e,t,n){"use strict";n("440a")},d24a:function(e,t,n){"use strict";n("39bf")},f440:function(e,t,n){"use strict";n("4cb7")}}]);
//# sourceMappingURL=home.a56eb866.js.map